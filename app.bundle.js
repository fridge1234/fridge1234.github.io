(()=>{var e,t={4:(e,t,o)=>{"use strict";var n=o(706),i=o(379),a=o.n(i),r=o(679),s={insert:"head",singleton:!1};a()(r.Z,s);r.Z.locals;var l=o(307);const c=function(e){const t={id:"rbmloader",at:document.body,freq:25,size:{h:50,w:50,hl:4,wl:4},colors:["grey","silver","darkgrey","lightgrey","black","white","gainsboro","dimgray"]},o=Object.assign({},t,e);function n(e,t){const o=document.createElementNS("http://www.w3.org/2000/svg",e);return function(e,t){for(var o in t)e.setAttribute(o,t[o])}(o,t),o}let i,a,r,s;this.stop=function(){clearInterval(i)},this.start=function(){i=setInterval(p,o.freq)},this.disable=function(){this.stop(),o.at.removeChild(a)};const l=e=>Math.random()*e|0,c=o.colors,d=c.length,p=()=>r[l(s)].style.fill=c[l(d)];(()=>{const e=n("svg",{id:o.id,width:o.size.w*o.size.wl,height:o.size.h*o.size.hl,style:o.style}),t=document.createDocumentFragment();for(let e=0;e<o.size.hl;e++)for(let i=0;i<o.size.wl;i++)t.appendChild(n("rect",{width:o.size.w,height:o.size.h,x:i*o.size.w,y:e*o.size.h}));e.appendChild(t),o.at.appendChild(e),a=document.getElementById(e.id),r=a.children,s=r.length,this.start()})()};let d;var p=o(242),m=o(171),u=o(469),v=o(141);const f=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,y=/ Android | webOS | iPhone | iPad | iPod | BlackBerry | IEMobile | Opera Mini /i.test(navigator.userAgent);let x,h,g,w=!1;const P=(e,t)=>{h=e,x=t},b=()=>{w||(w=!0,n.ZP.timeline().remove(g),h.play(),window.removeEventListener("wheel",b),window.removeEventListener("touchmove",b))},z=()=>{w=!1,h.pause(),(()=>{g=n.ZP.timeline();const e={rot:0},t=(new l.Pa4).copy(x.position).distanceTo(x.lookTarget.position);g.to(e,{rot:3e5,duration:1e4,onUpdate:()=>{x.proxypos.set(Math.cos(.005*e.rot)*t,x.proxypos.y,Math.sin(.005*e.rot)*t),x.updPos()}})})(),window.addEventListener("wheel",b),window.addEventListener("touchmove",b)},A=()=>{alert("осторожно музыка...");const e=new Audio("./assets/source.wav");e.loop=!0,e.play()};var M=o(681),C=o(274),S=o(962);const E=new M.E;E.setCrossOrigin("anonymous");const k=new C._;k.setDecoderPath("../node_modules/three/examples/js/libs/draco/gltf/"),E.setDRACOLoader(k);const F=(new S.x).setDataType(l.ywz),U=new l.dpR;var T=o(333),_=o.n(T),D=o(562),L=o.n(D);const{randFloat:j}=l.M8C;var O=o(692),Z=o.n(O),W=o(191),q=o.n(W);const{randFloat:B}=l.M8C,I={},R=async(e,t,o)=>{const[n,i,a,r,s,c,d,p,m,u]=await Promise.all([F.loadAsync("./assets/venice_sunset_1k.hdr"),E.loadAsync("./assets/aster v4.gltf"),E.loadAsync("./assets/globe v2-4 (1).gltf"),E.loadAsync("./assets/fly.glb"),U.loadAsync("/assets/space/space5_.jpg"),U.loadAsync("./assets/star.png"),U.loadAsync("./assets/smoke.png"),U.loadAsync("./assets/comet_tex.jpg"),U.loadAsync("./assets/comet_edge.png"),U.loadAsync("./assets/trace.png")]);Object.assign(I,{startex:c,expltex:d,comettex:p,cometedgetex:m,tracetex:u});const v=t.fromEquirectangular(n).texture;t.dispose(),e.environment=v;const f=i.scene.children[0];f.material.metalness=50,f.layers.enable(1);const y=i.scene.children[1];y.layers.enable(1);const x=V(a.scene.children[2]),h=a.scene.children[1];h.layers.enable(1);const g=H(r.scene.children[0]);return{asteroid:f,fragments:y,sphere:x,comet:$(r.scene.children.find((e=>"Icosphere001"===e.name))),grid:g,stars:((e,t)=>{const o=new l.u9r,n=9e3,i=new Float32Array(3*n);for(let t=0;t<n;t++)i[3*t]=j(-1,1)*e,i[3*t+1]=j(-1,1)*e,i[3*t+2]=j(-1,1)*e;const a=new Float32Array([...Array(n)].map((e=>Math.random()))),r=new Float32Array([...Array(n)].map((e=>3.14*Math.random()*2)));o.setAttribute("position",new l.TlE(i,3)),o.setAttribute("mass",new l.TlE(a,1)),o.setAttribute("light",new l.TlE(r,1));const s=new l.jyz({defines:{RAD:`${e}.0`},uniforms:{time:{value:0},uTexture:{value:I.startex},center:{value:new l.Pa4}},vertexShader:_(),fragmentShader:L(),transparent:!0,depthWrite:!1,blending:l.WMw}),c=new l.woe(o,s);return c.material.uniforms.needsUpdate=!0,c.frustumCulled=!1,c.layers.enable(1),t.add(c),c.upd=()=>{c.material.uniforms.time.value+=.005},c})(50,e),starsF:((e=10,t)=>{const o=new l.u9r,n=8e3,i=new Float32Array(3*n);for(let t=0;t<n;t++)i[3*t]=B(-1,1)*e,i[3*t+1]=B(-1,1)*e,i[3*t+2]=B(-1,1)*e;const a=new Float32Array([...Array(n)].map((e=>Math.random())));o.setAttribute("position",new l.TlE(i,3)),o.setAttribute("mass",new l.TlE(a,1));const r=new l.jyz({defines:{RAD:`${e}.0`},uniforms:{time:{value:0},center:{value:new l.Pa4}},vertexShader:Z(),fragmentShader:q(),transparent:!0,depthWrite:!1,blending:l.WMw}),s=new l.woe(o,r);return s.material.uniforms.needsUpdate=!0,s.frustumCulled=!1,s.layers.enable(1),t.add(s),s})(35,e),platform2:h,world:((e,t,o)=>{const n=new l.xo$(800,200,200),i=new l.xoR({side:l._Li});i.shininess=-1e3,i.map=o;const a=new l.Kj0(n,i);return a.material.side=l.ehD,a.material.map.wrapS=l.rpg,a.material.map.wrapT=l.rpg,a.material.map.repeat.set(5,3),a.layers.enable(0),e.add(a),a.updateWorld=()=>a.position.copy(t.lookTarget.position),a})(e,o,s)}},V=e=>(e.material.envMapIntensity=2,e.material.roughness=.5,e.layers.enable(1),e),$=e=>(e.material.envMapIntensity=2,e.material.roughness=.5,e.layers.enable(1),e),H=e=>{const t=e.clone(),o=e.clone(),n=e.clone(),i=new l.ZAu;return i.add(e),i.add(t),i.add(o),i.add(n),e.position.set(0,0,0),t.position.set(352.5,0,0),o.position.set(705,0,0),n.position.set(1057.5,0,0),i.layers.enable(1),i};var K=o(256),G=o.n(K),N=o(403),Y=o.n(N);const{randFloat:X}=l.M8C;var J=o(872),Q=o.n(J),ee=o(139),te=o.n(ee);const oe=(e,t=new l.Pa4)=>{const o=new l.Kj0(new l.xo$(1,32,32),new l.jyz({vertexShader:Q(),fragmentShader:te(),uniforms:{utime:{value:0}},transparent:!0,side:l.ehD,depthWrite:!1,blending:l.WMw}));return o.material.uniforms.needsUpdate=!0,o.frustumCulled=!1,o.layers.enable(1),e.add(o),o.position.copy(t),n.ZP.to(o.material.uniforms.utime,{value:Math.PI,duration:2,onUpdate:()=>{let e=3*(o.material.uniforms.utime.value/Math.PI)+1;o.scale.set(4*e,3*e,4*e)},onComplete:()=>e.remove(o)}),{sphrshdr:o}},ne=()=>2*Math.random()-1;function ie({asteroid:e,fragments:t,sphere:o,camera:i,camPlatform:a,scene:r,stars:s,starsF:c}){let d={v:0,v2:0,v3:0};let p=!1;const m=()=>{r.remove(e),e.geometry.dispose(),e.material.dispose(),e.remove()},u=n.ZP.timeline({defaults:{ease:"linear"}});return u.call((()=>{r.add(e),c.material.uniforms.center.value=e.position,s.material.uniforms.center.value=e.position,a.proxypos.set(10,0,10),e.position.set(0,10,0)})).to(e.position,15,{y:-10,ease:"sine.out"}).to(d,25,{v:2100,onUpdate:()=>{a.proxypos.set(10*Math.cos(.005*d.v),a.proxypos.y,10*Math.sin(.005*d.v)),a.updPos()}},0).to(a.proxypos,10,{onStart:()=>{a.lookTarget=e},y:-10,ease:"sine.in"},5).to(d,2,{v2:300,onStart:()=>e.shpos=e.position,onUpdate:()=>{e.position.copy(new l.Pa4(ne(),ne(),ne()).divideScalar(5).add(e.shpos)),p||(p=!0,((e,t)=>{const o=5e3,i=new Float32Array(3*o),a=new Float32Array(3*o),r=new Float32Array(o);for(let t=0;t<o;t++)a[3*t]=X(-1,1)/50,a[3*t+1]=X(-1,1)/50,a[3*t+2]=X(-1,1)/50,i[3*t]=e.x+X(-1,1)/5,i[3*t+1]=e.y+X(-1,1)/5,i[3*t+2]=e.z+X(-1,1)/5,r[t]=Math.random();const s=new l.u9r;s.setAttribute("position",new l.TlE(i,3)),s.setAttribute("velocity",new l.TlE(a,3)),s.setAttribute("mass",new l.TlE(r,1));const c=new l.jyz({vertexShader:G(),fragmentShader:Y(),uniforms:{tex:{value:I.expltex},time:{value:0},groundzero:{value:e}},transparent:!0,depthWrite:!1,blending:l.WMw});c.uniforms.needsUpdate=!0;const d=new l.woe(s,c);d.layers.enable(1),d.frustumCulled=!1,t.add(d),n.ZP.to(c.uniforms.time,{value:1e3,duration:2,delay:1,ease:"power3.in",onComplete:()=>{t.remove(d),d.material.dispose(),d.geometry.dispose(),d.remove()}})})(e.position,r),setTimeout((()=>oe(r,e.position)),800))},onComplete:()=>{const{x:n,y:i,z:l}=e.shpos;r.add(t),r.add(o),t.position.set(n,i,l),o.position.set(n,i,l),a.lookTarget=o,m(),s.material.uniforms.center.value=o.position,c.material.uniforms.center.value=o.position}},15).to(d,2,{v3:300,ease:"power4.out",onUpdate:()=>{t.children.forEach((e=>{e.dirs=new l.Pa4,e.dirs.subVectors(e.geometry.boundingSphere.center,new l.Pa4(0,0,0)).normalize(),e.dirs.multiplyScalar(1.25),e.position.add(e.dirs)})),t.position.set(0,t.position.y+.44,0)},onComplete:()=>{r.remove(t),t.children.forEach((e=>{"Mesh"===e.type&&(e.material.dispose(),e.geometry.dispose())})),t.clear()}},17),u}var ae=o(864),re=o.n(ae),se=o(35),le=o.n(se);const{randFloat:ce}=l.M8C,{pow:de}=Math;l.Ilk.prototype.toVec3=function(){const e=e=>Number(e).toPrecision(3);return`vec3(${e(de(this.r,2.2))},${e(de(this.g,2.2))},${e(de(this.b,2.2))})`};const pe=function(e,t,o,n=500){n+=Math.floor(12*Math.random());const i=e;i.prev=new l.Pa4;const{geometry:a,lifetime:r,vertices:s}=(e=>{const t=new l.u9r,o=new Float32Array(3*e),n=new Float32Array(e),i=new Float32Array(e);for(let t=0;t<e;t++)n[t]=ce(0,1),i[t]=0;return t.setAttribute("position",new l.TlE(o,3)),t.setAttribute("mass",new l.TlE(n,1)),t.setAttribute("lifetime",new l.TlE(i,1)),t.needsUpdate=!0,{geometry:t,lifetime:i,vertices:o}})(n),c=(e=>new l.jyz({vertexShader:re(),fragmentShader:le(),defines:{COLOR:new l.Ilk(e).toVec3()},uniforms:{utex:{value:I.tracetex},utarget:{value:new l.Pa4}},transparent:!0,depthWrite:!1,blending:l.WMw}))(o),d=new l.woe(a,c);d.frustumCulled=!1,d.layers.enable(1),t.add(d);let p=[],m=[...Array(n)].map(((e,t)=>t)),u=0;const v=(e,t=0)=>{a.attributes.position.needsUpdate=!0,m.length<1&&(p.splice(u,1),m.push(u),u=++u%n);const o=m.shift();r[o]=0,s[3*o]=e.x,s[3*o+1]=e.y,s[3*o+2]=e.z,p.push(o)},f=(e,t)=>{if(e.distanceTo(t)>.1){const o=(new l.Pa4).copy(e).add(t).divideScalar(2);v(o,.005),f(e,o),f(o,t)}};let y;d.material.uniforms.needsUpdate=!0;const x=()=>{y=requestAnimationFrame(x),i.prev.equals(i.position)||(f(i.prev,i.position),v(i.position),i.prev.copy(i.position)),(()=>{a.attributes.lifetime.needsUpdate=!0;let e=0;for(;e<p.length;)r[p[e]]+=.01,r[p[e]]>1?(m.push(p[e]),p.splice(e,1)):e++})(),d.material.uniforms.utarget.value=i.position};return x(),d.selfrem=()=>{cancelAnimationFrame(y),t.remove(d),d.clear(),d.material.dispose(),d.geometry.dispose()},d};function me({sphere:e,camPlatform:t,scene:o,comet:i,grid:a,stars:r,starsF:s}){let l=[];const c=n.ZP.timeline({defaults:{ease:"linear"}});return c.to(e.position,3,{x:0,y:5,z:0},"enterScene2").to(t.proxypos,3,{x:10,y:2,z:3,onUpdate:t.updPos},"enterScene2").call((()=>{o.add(a),a.position.set(-1800,0,0),o.add(e),l=[...Array(5)].map((e=>i.clone())),l.forEach(((t,n)=>{o.add(t),t.tr=pe(t,o,"#ffffff",500),t.mass=Math.random();let i=e.position.z-15+4*(n+1.5);Math.abs(Math.abs(e.position.z)-Math.abs(i))<2&&(i=i>0?i+2:i-2),t.position.set(e.position.x-40-10*(1-t.mass),5+2.5*ne(),i)})),s.material.uniforms.center.value=e.position,r.material.uniforms.center.value=e.position,l.forEach((e=>{c.to(e.position,24,{x:-1420-100*e.mass,ease:"sine.in"},"race")}),"race")})).to(a.position,{x:-1200,duration:1,ease:"expo.out"},"race").to(e.position,24,{x:-1550,ease:"sine.in",onUpdate:()=>{s.material.uniforms.time.value+=.25},onStart:()=>{e.tr=pe(e,o,"#f7dd7e",500)}},"race").to(t.proxypos,13,{y:18,z:-40,ease:"sine.in"},"race").to(t.proxypos,24,{x:-1525,ease:"sine.in",onUpdate:t.updPos},"race").to(t.proxypos,7,{x:-1340,y:8,z:15,ease:"sine.out",onUpdate:t.updPos},"race+=16").to(t.proxypos,5,{x:-1525,onUpdate:t.updPos,ease:"linear"},"race+=19").to(a.position,3,{x:0,onStart:()=>{l.forEach((e=>c.to(e.position,3,{x:100*e.mass},"finish")))},onComplete:()=>{o.remove(a),a.children.forEach((e=>{e.material.dispose(),e.geometry.dispose()})),a.clear(),[...l,i].forEach((e=>{o.remove(e),e.material.dispose(),e.geometry.dispose(),e.remove(),e.tr&&e.tr.selfrem()}))}},"finish").to(e.position,3,{x:-1700,ease:"linear"},"finish").to(t.proxypos,3,{x:-1685,z:-10,ease:"linear",onUpdate:t.updPos},"finish").to(e.position,7,{x:0,y:0,z:0,ease:"expo.inOut",onComplete:()=>{e.tr.selfrem()}},"enterScene3").to(t.proxypos,7,{x:-20,y:15,z:0,onUpdate:t.updPos,ease:"expo.inOut"},"enterScene3"),c}var ue=o(463),ve=o.n(ue),fe=o(148),ye=o.n(fe),xe=o(471),he=o.n(xe),ge=o(598),we=o.n(ge);const{randFloat:Pe,clamp:be}=l.M8C,ze=e=>{const t=(o=e,Math.sqrt(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]));var o;return[e[0]/t,e[1]/t,e[2]/t]},Ae=(e=1,t,o)=>{const i=(e=>{const t=new Float32Array(150),o=new Float32Array(50);for(let n=0;n<50;n++){const i=ze([be(2*Pe(-1,1)-.05,-.025,.025),Pe(-1,1)*e,Pe(-1,1)*e]);t[3*n]=i[2],t[3*n+1]=i[1],t[3*n+2]=i[0],o[n]=Math.random()/3}const n=new l.u9r;n.setAttribute("position",new l.TlE(t,3)),n.setAttribute("mass",new l.TlE(o,1));const i=new l.jyz({vertexShader:he(),fragmentShader:we(),uniforms:{tex:{type:"t",value:I.cometedgetex},time:{value:0},center:{value:new l.Pa4}},transparent:!0,depthWrite:!1,blending:l.WMw}),a=new l.woe(n,i);return a.material.uniforms.needsUpdate=!0,a.frustumCulled=!1,a})(e),a=(e=>{const t=new l.Kj0(new l.xo$(e,32,32),new l.jyz({vertexShader:ve(),fragmentShader:ye(),uniforms:{uTex:{value:I.comettex},time:{value:0}}}));return t.material.uniforms.needsUpdate=!0,t})(e);let r,s=0;const c=()=>{r=requestAnimationFrame(c),a.material.uniforms.time.value+=5e-4,s+=.0025,i.material.uniforms.center.value=a.position,i.quaternion.copy(o.quaternion),i.rotation.z=s,i.rotateOnAxis(new l.Pa4(1,0,0),s)};c();const d=new l.ZAu;return d.add(a),d.add(i),t.add(d),d.layers.enable(1),d.selfrem=()=>{cancelAnimationFrame(r),t.remove(d),d.clear(),d.remove()},d.spawnEffect=()=>{n.ZP.fromTo(d.scale,.5,{x:0,y:0,z:0},{x:1,y:1,z:1})},d.spawnEffect(),d};function Me({sphere:e,camPlatform:t,scene:o,platform2:i,stars:a,starsF:r,camera:s}){const l={rot:0,rad:15,y:0};let c=[];const d=n.ZP.timeline({defaults:{ease:"linear"}});return d.call((()=>{n.ZP.to(e.position,{x:0,y:0,z:0}),o.add(i),i.position.set(0,-50,0),[...Array(15)].forEach(((t,n)=>{const i=Ae(1,o,s);c.push(i),i.position.set(e.position.x-40-10*Math.random(),5+2*ne(),e.position.z-15+4*(n+1.5))})),c.forEach(((t,i)=>{t.intersect=!1,t.tr=pe(t,o,"white",500),t.position.set(ne()>0?10*ne()+2:-10*ne()-2,e.position.y,ne()>0?10*ne()+2:-10*ne()-2),t.rad=15*Math.random()+3*i+11,t.zc=1;let a=100*(i+10),r=e.scale.z/2,s=e.scale.x/2;d.to(t,{rad:0,duration:2*i+5,ease:"linear"},0),d.to(t,{zc:10,duration:2*i+5,ease:"sine.in",onUpdate:()=>{if(a+=t.zc,t.position.z<r&&t.position.z>-r&&t.position.x<s&&t.position.x>-s&&!t.intersect){t.intersect=!0,t.selfrem(),t.tr.selfrem();const i=e.scale.x+.5/e.scale.x+.25;n.ZP.to(e.scale,1,{x:i,y:i,z:i,ease:"linear",onComplete:()=>{r=e.scale.z,s=e.scale.x}}),n.ZP.to(e.position,1,{y:e.scale.x/2.5}),oe(o,e.position);let a=e.material.metalness;n.ZP.to(e.material,.5,{metalness:10,onComplete:()=>n.ZP.to(e.material,.5,{metalness:a+.55})})}else t.position.set(Math.cos(.02*a)*t.rad,0,Math.sin(.02*a)*t.rad)}},0)}))})).to(i.position,{y:-5,duration:3,ease:"power4.out"},0).to(l,100,{rot:1e4,rad:28,y:2.5,onUpdate:()=>{t.proxypos.set(Math.cos(.005*l.rot)*l.rad,l.y,Math.sin(.005*l.rot)*l.rad),t.updPos()}},0),d}d=new c({at:document.querySelector(".loader"),colors:["coral","red","darkred","black","black","black"],freq:15,style:"margin: auto;",size:{h:40,w:4,hl:12,wl:4}});const{scene:Ce,animate:Se,setcb:Ee,camera:ke,camPlatform:Fe,pmremGenerator:Ue,controls:Te}=(()=>{const e=new l.xsS,t=new l.cPb(75,1,.1,1e3),o=new l.CP7({antialias:!f,precision:y?"mediump":"highp"});o.autoClear=!1,o.outputEncoding=l.knz,o.setPixelRatio(2);const i=()=>{t.aspect=window.innerWidth/window.innerHeight,o.setSize(window.innerWidth,window.innerHeight),t.updateProjectionMatrix()};i(),document.body.appendChild(o.domElement),window.addEventListener("resize",i);const a=new l.anP(o);a.compileEquirectangularShader(),t.layers.enable(0),t.layers.enable(1),o.autoClear=!1;const r=new p.x(o),s=new u.C(e,t),c=new l.FM8(window.innerWidth,window.innerHeight),d=new m.m(o.getDrawingBufferSize(c),1,1,.1);r.addPass(s),r.addPass(d),d.strength=3;const{camPlatform:x,controls:h}=((e,t,o)=>{const i=new v.z(e,t.domElement);i.dampingFactor=.025,i.enableDamping=!0,i.maxDistance=50,i.zoomSpeed=2.2,i.enablePan=!1,i.screenSpacePanning=!0;const a=new l.ZAu;a.add(e),o.add(a),a.proxypos=new l.Pa4,a.lock=!1,a.updPos=()=>{a.lock?a.position.copy(a.lookTarget.position):(a.position.copy(a.proxypos),i.update())},a.lookTarget={position:new l.Pa4},a.lookAt=()=>{e.lookAt(a.lookTarget.position)},a.animateCB=()=>{a.lock&&i.update(),a.lookAt()},a.returnLock=!1,a.test=new l.Pa4,a.timer=null,a.timerLock=!1,i.addEventListener("start",(()=>{if(console.log("start"),!a.returnLock&&!a.timerLock){a.lock=!0;const t=(new l.Pa4).copy(a.position);t.sub(a.lookTarget.position),a.position.copy(a.lookTarget.position),a.position.y+=2,a.position.x-=12,e.position.copy(t),a.test.copy(t)}})),i.addEventListener("end",(()=>{console.log("end"),clearTimeout(a.timer),a.timer=setTimeout(r,1e3),a.timerLock=!0}));const r=()=>{if(a.timerLock=!1,console.log("thats it!"),!a.returnLock){a.lock=!1;const r=(new l.Pa4).copy(e.position);r.add(a.lookTarget.position),a.position.copy(r),t=a.test,o=e.position,t.distanceTo(o)>.5?n.ZP.to(e.position,{x:0,y:0,z:0,onUpdate:a.lookAt,duration:1.5,onStart:()=>{i.enabled=!1},onComplete:()=>{i.enabled=!0}}):e.position.set(0,0,0)}var t,o};return{controls:i,camPlatform:a}})(t,o,e);let g;const w=()=>{requestAnimationFrame(w),x.updPos(),x.animateCB(),o.clear(),t.layers.set(0),r.render(),o.clearDepth(),t.layers.set(1),o.render(e,t),g()};return{scene:e,camera:t,camPlatform:x,renderer:o,animate:w,setcb:e=>g=e,pmremGenerator:a,controls:h}})();(async()=>{const{asteroid:e,fragments:t,sphere:o,comet:n,grid:i,stars:a,starsF:r,platform2:s,world:c}=await R(Ce,Ue,Fe);(e=>{const t=[];t[0]=new l.Mig(16777215,.3),t[1]=new l.Ox3(16777215,1),t[1].position.set(0,1e3,0),e.add(t[0]),e.add(t[1])})(Ce),Ee((()=>{a.upd(),o.rotateY(.0025*Math.PI),c.updateWorld()})),_e({asteroid:e,fragments:t,sphere:o,comet:n,grid:i,stars:a,starsF:r,platform2:s})})();const _e=({asteroid:e,fragments:t,sphere:o,comet:i,grid:a,stars:r,starsF:s,platform2:c})=>{!function(){const e=document.querySelector(".loader");d.disable(),document.body.removeChild(e)}(),Se();const p=n.ZP.timeline();P(p,Fe);const m={camPlatform:Fe,camera:ke,scene:Ce,controls:Te,sphere:o,stars:r,starsF:s};A(),p.add(ie({...m,asteroid:e,fragments:t})),p.call(z),p.add(me({...m,comet:i,grid:a})),p.call(z),p.add(function({sphere:e,camPlatform:t,scene:o,stars:i,starsF:a,controls:r,camera:s}){i.material.uniforms.center.value=e.position;const c={depth:0,op:1,sc:.1,radius:30};let d=[];const p=()=>{if(d.length>70){let e=d[0];d.shift(),e.position.copy(P[P.length-1]),d.push(e),e.spawnEffect()}else{const e=Ae(1,o,s);d.push(e),e.position.copy(P[P.length-1]),o.add(e),e.spawnEffect()}},m=window.innerWidth,u=window.innerHeight,v=m/2,f=u/2,y=(e,t)=>-(e>t?-(e-t)/t:1-e/t),x={y:0,x:0},h=e=>{n.ZP.to(x,{y:y(e.clientY,f),x:y(e.clientX,v),duration:.2,ease:"linear"})};let g=0,w=0,P=[];const b=()=>{const e=P[P.length-1].distanceTo(P[P.length-2]);w+=e,w>6&&(p(),w=0)},z=()=>{g++;const e=c.depth,t=13*x.y+Math.cos(c.sc*g)*c.radius,o=13*-x.x+Math.sin(c.sc*g)*c.radius,n=new l.Pa4(e,t,o);P.push(n)},A=n.ZP.timeline({defaults:{ease:"linear"}});return A.call((()=>{n.ZP.set(t.proxypos,{x:-18,y:8,z:13}),r.enabled=!1})).to(e.position,6,{x:150,y:0,z:0,ease:"power4.in"}).to(t.proxypos,6,{x:68,y:8,z:13,ease:"power4.in",onUpdate:t.updPos},0).to(c,3,{radius:20,ease:"expo.in"},0).to(c,6,{sc:.02,depth:340,onUpdate:()=>{z(),P.length>1?b():p()},onComplete:()=>P.splice(0,Math.min(P.length/2,P.length-160))},0).to(c,{onStart:()=>{r.enabled=!0,document.addEventListener("mousemove",h)},depth:1700,duration:30,onUpdate:()=>{z(),b();const o=P.shift();e.position.set(o.x+4,o.y+4,o.z+4),t.proxypos.set(e.position.x-17,e.position.y+18*x.y/2,e.position.z+13*x.x/2),t.updPos()},onComplete:()=>{document.removeEventListener("mousemove",h)}},6).to(e.position,2,{x:e.position.x+500,onComplete:()=>d.forEach((e=>e.selfrem()))},"preEnterScene4").to(t.proxypos,2,{x:e.position.x+490,onUpdate:t.updPos},"preEnterScene4").to(e.position,5,{x:0,y:0,z:0},"enterScene4").to(t.proxypos,5,{x:10,y:5,z:10,onUpdate:t.updPos},"enterScene4"),A}({...m})),p.call(z),p.add(Me({...m,platform2:c})),p.call(z)}},679:(e,t,o)=>{"use strict";o.d(t,{Z:()=>a});var n=o(705),i=o.n(n)()((function(e){return e[1]}));i.push([e.id,"body{margin:0;padding:0;background:#000}.loader{position:absolute;height:100vh;width:100vw;display:flex;background:#000}",""]);const a=i},148:e=>{e.exports="varying vec2 vUv;\nvarying vec3 vPos;\nuniform sampler2D uTex;\nuniform float time;\n#define B vec3(0.2, 0.2, 1.0)\r\nvoid main() {\n\tvec2 uv = vUv;\n\tuv += time;\n\tuv = fract(uv);\n\tvec2 uv2 = vUv;\n\tuv2 -= (time + 2.2);\n\tuv2 = fract(uv2);\n\tvec4 tex = texture2D(uTex, uv) * texture2D(uTex, uv2);\n\ttex *= vec4(B, 10.0);\n\ttex *= vec4(1200.0);\n\tgl_FragColor = tex;\n}\n"},463:e=>{e.exports="varying vec2 vUv;\nvarying vec3 vPos;\nvoid main() {\n\tvUv = uv;\n\tvPos = position;\n\tvec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n\tgl_Position = projectionMatrix * mvPosition;\n}\n"},598:e=>{e.exports="uniform sampler2D tex;\n#define B vec4(0.0, 0.1, 1.0, 1.0)\r\nvoid main() {\n\tvec2 uv = gl_PointCoord.xy;\n\tvec4 fc = texture2D(tex, uv);\n\tfc *= vec4(1.0);\n\tfc *= B;\n\tgl_FragColor = fc;\n}\n"},471:e=>{e.exports="uniform float time;\nuniform vec3 center;\nattribute float mass;\nvarying float vDistance;\nvoid main() {\n\tvec3 pos = center + position;\n\tvec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);\n\tfloat dd = 1.0 + (distance(mvPosition.xyz, pos) / 10.0);\n\tgl_PointSize = (1500.0 / dd) * mass;\n\tgl_Position = projectionMatrix * mvPosition;\n}\n"},403:e=>{e.exports="uniform sampler2D tex;\nvarying float vDistance;\n#define FC vec3(1.0, 0.8, 0.1)\r\nvoid main() {\n\tvec2 uv = gl_PointCoord.xy;\n\tfloat d = 1.0 / (1.0 + vDistance);\n\td = pow(d, 2.0);\n\tgl_FragColor = texture2D(tex, uv) * vec4(FC, d);\n}\n"},256:e=>{e.exports="uniform float time;\nuniform vec3 groundzero;\nattribute float mass;\nattribute vec3 velocity;\nvarying float vDistance;\nvoid main() {\n\tvec3 pos = position;\n\tpos += (((velocity * time) * 600.0) * (1.0 - mass));\n\tvec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);\n\tfloat dist = distance(pos, groundzero);\n\tvDistance = dist;\n\tfloat d = 1.0 / (1.0 + dist);\n\tgl_PointSize = ((time * 500.0) * mass) * pow(d, 2.0);\n\tif (dist < 1.0) {\n\t\tgl_PointSize *= 0.01;\n\t}\n\tgl_Position = projectionMatrix * mvPosition;\n}\n"},139:e=>{e.exports="varying vec2 vUv;\nuniform float utime;\nvoid main() {\n\tvec2 uv = vUv;\n\tfloat f = 1.0 - distance(0.5, uv.y);\n\tfloat time = cos(utime);\n\tf = pow(f, 25.0 / clamp(1.0 - cos(utime), 0.1, 1.0));\n\tfloat tf = f * (1.0 - cos(utime));\n\tvec3 color = vec3(tf);\n\tgl_FragColor = vec4(color, tf * sin(0.5 + utime));\n}\n"},872:e=>{e.exports="varying vec2 vUv;\nvoid main() {\n\tvUv = uv;\n\tvec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n\tgl_Position = projectionMatrix * mvPosition;\n}\n"},562:e=>{e.exports="uniform float time;\nuniform sampler2D uTexture;\nvarying vec3 vPosition;\nvarying float ol;\n#define B vec3(0.2, 0.2, 1.0)\r\nvoid main() {\n\tvec2 uv = gl_PointCoord.xy;\n\tfloat ot = time + ol;\n\tfloat otc = cos(ot);\n\tfloat y = sin(((vPosition.x + vPosition.y) + vPosition.z) + ot);\n\tfloat z = cos(time + ((vPosition.x * vPosition.y) / vPosition.z)) - (1.0 - otc);\n\tvec3 color = vec3(otc, y, z);\n\tcolor = mix(color, B, 0.9);\n\tgl_FragColor = vec4(color, otc) * texture2D(uTexture, uv);\n}\n"},333:e=>{e.exports="varying vec3 vPosition;\nvarying float ol;\nattribute float mass;\nattribute float light;\nuniform vec3 center;\nconst float D = RAD * 2.0;\nfloat dr(float x, float z) {\n\tfloat mp = x > z ? -1.0 : 1.0;\n\tz += (RAD * mp);\n\tfloat dx = distance(x, z);\n\tfloat n = floor(dx / D) * D;\n\tx += (n * mp);\n\treturn x;\n}\nvec3 dr(vec3 x, vec3 y) {\n\treturn vec3(dr(x.x, y.x), dr(x.y, y.y), dr(x.z, y.z));\n}\nvoid main() {\n\tvec3 pos = dr(position, center);\n\tol = light;\n\tvPosition = position;\n\tvec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);\n\tgl_PointSize = 70.0 * mass;\n\tgl_Position = projectionMatrix * mvPosition;\n}\n"},191:e=>{e.exports="void main() {\n\tgl_FragColor = vec4(vec3(1.), 1.);\n}\n"},692:e=>{e.exports="uniform vec3 center;\nuniform float time;\nattribute float mass;\nconst float D = RAD * 2.0;\nfloat dr(float x, float z) {\n\tfloat mp = x > z ? -1.0 : 1.0;\n\tz += (RAD * mp);\n\tfloat dx = distance(x, z);\n\tfloat n = floor(dx / D) * D;\n\tx += (n * mp);\n\treturn x;\n}\nvec3 dr(vec3 x, vec3 y) {\n\treturn vec3(dr(x.x, y.x), dr(x.y, y.y), dr(x.z, y.z));\n}\nvoid main() {\n\tvec3 pos = position;\n\tpos.z += time;\n\tpos = dr(pos, center);\n\tvec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);\n\tgl_PointSize = 2.0 * mass;\n\tgl_Position = projectionMatrix * mvPosition;\n}\n"},35:e=>{e.exports="uniform sampler2D utex;\nvarying float vLifetime;\nvarying vec3 vPos;\nvec2 rotateUV(vec2 uv, float rotation) {\n\tfloat mid = 0.5;\n\treturn vec2(((cos(rotation) * (uv.x - mid)) + (sin(rotation) * (uv.y - mid))) + mid, ((cos(rotation) * (uv.y - mid)) - (sin(rotation) * (uv.x - mid))) + mid);\n}\nvoid main() {\n\tif (vLifetime < 1.0) {\n\t\tvec2 uv = gl_PointCoord.xy;\n\t\tfloat f = pow(1.0 - distance(uv, vec2(0.5)), 6.0);\n\t\tvec4 fc = texture2D(utex, rotateUV(uv, (vPos.y + vPos.x) + vPos.z));\n\t\tif (vLifetime > 0.0) {\n\t\t\tgl_FragColor = vec4(COLOR, 1.0 - vLifetime) * fc;\n\t\t\tgl_FragColor.w *= (1.0 - vLifetime);\n\t\t}\n\t\telse {\n\t\t\tgl_FragColor = vec4(0.0);\n\t\t}\n\t}\n\telse {\n\t\tdiscard;\n\t}\n}\n"},864:e=>{e.exports="attribute float mass;\nattribute float lifetime;\nuniform vec3 utarget;\nvarying vec3 vPos;\nvarying float vLifetime;\nvoid main() {\n\tvLifetime = lifetime;\n\tvPos = position;\n\tfloat dt = 1.0 - (distance(utarget, position) / 20.0);\n\tif (dt > 0.0) {\n\t\tgl_PointSize = ((1000.0 * mass) * (1.0 - vLifetime)) * dt;\n\t\tvec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n\t\tgl_PointSize *= (2.0 / -mvPosition.z);\n\t\tgl_Position = projectionMatrix * mvPosition;\n\t}\n}\n"}},o={};function n(e){var i=o[e];if(void 0!==i)return i.exports;var a=o[e]={id:e,exports:{}};return t[e](a,a.exports,n),a.exports}n.m=t,e=[],n.O=(t,o,i,a)=>{if(!o){var r=1/0;for(c=0;c<e.length;c++){for(var[o,i,a]=e[c],s=!0,l=0;l<o.length;l++)(!1&a||r>=a)&&Object.keys(n.O).every((e=>n.O[e](o[l])))?o.splice(l--,1):(s=!1,a<r&&(r=a));s&&(e.splice(c--,1),t=i())}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[o,i,a]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={143:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var i,a,[r,s,l]=o,c=0;for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)var d=l(n);for(t&&t(o);c<r.length;c++)a=r[c],n.o(e,a)&&e[a]&&e[a][0](),e[r[c]]=0;return n.O(d)},o=self.webpackChunkouterspace_webpack=self.webpackChunkouterspace_webpack||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var i=n.O(void 0,[557,365,923,328],(()=>n(4)));i=n.O(i)})();