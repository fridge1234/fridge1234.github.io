"use strict";(self.webpackChunkouterspace_webpack=self.webpackChunkouterspace_webpack||[]).push([[444],{7761:(t,e,i)=>{i.d(e,{M:()=>f});var n=i(8719),a=i(7406),r=i(1051),s=i(6881),o=i(223),l=i(924),h=i(4302),u=i(2010);const p={type:"move"};class c{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new u.Z,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new u.Z,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new s.P,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new s.P),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new u.Z,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new s.P,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new s.P),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,i){let n=null,a=null,r=null;const s=this._targetRay,o=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(null!==s&&(n=e.getPose(t.targetRaySpace,i),null!==n&&(s.matrix.fromArray(n.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),n.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(n.linearVelocity)):s.hasLinearVelocity=!1,n.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(n.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(p))),l&&t.hand){r=!0;for(const n of t.hand.values()){const t=e.getJointPose(n,i);if(void 0===l.joints[n.jointName]){const t=new u.Z;t.matrixAutoUpdate=!1,t.visible=!1,l.joints[n.jointName]=t,l.add(t)}const a=l.joints[n.jointName];null!==t&&(a.matrix.fromArray(t.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.jointRadius=t.radius),a.visible=null!==t}const n=l.joints["index-finger-tip"],a=l.joints["thumb-tip"],s=n.position.distanceTo(a.position),o=.02,h=.005;l.inputState.pinching&&s>o+h?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&s<=o-h&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==o&&t.gripSpace&&(a=e.getPose(t.gripSpace,i),null!==a&&(o.matrix.fromArray(a.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),a.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(a.linearVelocity)):o.hasLinearVelocity=!1,a.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(a.angularVelocity)):o.hasAngularVelocity=!1));return null!==s&&(s.visible=null!==n),null!==o&&(o.visible=null!==a),null!==l&&(l.visible=null!==r),this}}var d=i(4467),m=i(1661);class g extends d.x{constructor(t,e,i,n,a,r,s,o,l,h){if((h=void 0!==h?h:m.qkB)!==m.qkB&&h!==m.brP)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&h===m.qkB&&(i=m.LsT),void 0===i&&h===m.brP&&(i=m.wJv),super(null,n,a,r,s,o,h,i,l),this.image={width:t,height:e},this.magFilter=void 0!==s?s:m.TyD,this.minFilter=void 0!==o?o:m.TyD,this.flipY=!1,this.generateMipmaps=!1}}g.prototype.isDepthTexture=!0;var y=i(8449);class f extends a.p{constructor(t,e){super();const i=this;let a=null,u=1,p=null,d="local-floor";const f=t.extensions.has("WEBGL_multisampled_render_to_texture");let x=null,v=null,w=null,T=null,_=!1,b=null;const A=e.getContextAttributes();let E=null,M=null;const S=[],F=new Map,R=new r.c;R.layers.enable(1),R.viewport=new o.L;const D=new r.c;D.layers.enable(2),D.viewport=new o.L;const L=[R,D],V=new n.H;V.layers.enable(1),V.layers.enable(2);let W=null,k=null;function U(t){const e=F.get(t.inputSource);e&&e.dispatchEvent({type:t.type,data:t.inputSource})}function P(){F.forEach((function(t,e){t.disconnect(e)})),F.clear(),W=null,k=null,t.setRenderTarget(E),T=null,w=null,v=null,a=null,M=null,N.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function C(t){const e=a.inputSources;for(let t=0;t<S.length;t++)F.set(e[t],S[t]);for(let e=0;e<t.removed.length;e++){const i=t.removed[e],n=F.get(i);n&&(n.dispatchEvent({type:"disconnected",data:i}),F.delete(i))}for(let e=0;e<t.added.length;e++){const i=t.added[e],n=F.get(i);n&&n.dispatchEvent({type:"connected",data:i})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=S[t];return void 0===e&&(e=new c,S[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=S[t];return void 0===e&&(e=new c,S[t]=e),e.getGripSpace()},this.getHand=function(t){let e=S[t];return void 0===e&&(e=new c,S[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){u=t,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){d=t,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p},this.getBaseLayer=function(){return null!==w?w:T},this.getBinding=function(){return v},this.getFrame=function(){return b},this.getSession=function(){return a},this.setSession=async function(n){if(a=n,null!==a){if(E=t.getRenderTarget(),a.addEventListener("select",U),a.addEventListener("selectstart",U),a.addEventListener("selectend",U),a.addEventListener("squeeze",U),a.addEventListener("squeezestart",U),a.addEventListener("squeezeend",U),a.addEventListener("end",P),a.addEventListener("inputsourceschange",C),!0!==A.xrCompatible&&await e.makeXRCompatible(),void 0===a.renderState.layers||!1===t.capabilities.isWebGL2){const t={antialias:void 0!==a.renderState.layers||A.antialias,alpha:A.alpha,depth:A.depth,stencil:A.stencil,framebufferScaleFactor:u};T=new XRWebGLLayer(a,e,t),a.updateRenderState({baseLayer:T}),M=new h.d(T.framebufferWidth,T.framebufferHeight)}else{_=A.antialias;let t=null,i=null,n=null;A.depth&&(n=A.stencil?35056:33189,t=A.stencil?m.brP:m.qkB,i=A.stencil?m.wJv:m.LsT);const r={colorFormat:A.alpha||_?32856:32849,depthFormat:n,scaleFactor:u};v=new XRWebGLBinding(a,e),w=v.createProjectionLayer(r),a.updateRenderState({layers:[w]}),M=_?new y.p(w.textureWidth,w.textureHeight,{format:m.wk1,type:m.ywz,depthTexture:new g(w.textureWidth,w.textureHeight,i,void 0,void 0,void 0,void 0,void 0,void 0,t),stencilBuffer:A.stencil,ignoreDepth:w.ignoreDepthValues,useRenderToTexture:f}):new h.d(w.textureWidth,w.textureHeight,{format:A.alpha?m.wk1:m.UCm,type:m.ywz,depthTexture:new g(w.textureWidth,w.textureHeight,i,void 0,void 0,void 0,void 0,void 0,void 0,t),stencilBuffer:A.stencil,ignoreDepth:w.ignoreDepthValues})}this.setFoveation(0),p=await a.requestReferenceSpace(d),N.setContext(a),N.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};const H=new s.P,j=new s.P;function O(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===a)return;V.near=D.near=R.near=t.near,V.far=D.far=R.far=t.far,W===V.near&&k===V.far||(a.updateRenderState({depthNear:V.near,depthFar:V.far}),W=V.near,k=V.far);const e=t.parent,i=V.cameras;O(V,e);for(let t=0;t<i.length;t++)O(i[t],e);V.matrixWorld.decompose(V.position,V.quaternion,V.scale),t.position.copy(V.position),t.quaternion.copy(V.quaternion),t.scale.copy(V.scale),t.matrix.copy(V.matrix),t.matrixWorld.copy(V.matrixWorld);const n=t.children;for(let t=0,e=n.length;t<e;t++)n[t].updateMatrixWorld(!0);2===i.length?function(t,e,i){H.setFromMatrixPosition(e.matrixWorld),j.setFromMatrixPosition(i.matrixWorld);const n=H.distanceTo(j),a=e.projectionMatrix.elements,r=i.projectionMatrix.elements,s=a[14]/(a[10]-1),o=a[14]/(a[10]+1),l=(a[9]+1)/a[5],h=(a[9]-1)/a[5],u=(a[8]-1)/a[0],p=(r[8]+1)/r[0],c=s*u,d=s*p,m=n/(-u+p),g=m*-u;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(g),t.translateZ(m),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const y=s+m,f=o+m,x=c-g,v=d+(n-g),w=l*o/f*y,T=h*o/f*y;t.projectionMatrix.makePerspective(x,v,w,T,y,f)}(V,R,D):V.projectionMatrix.copy(R.projectionMatrix)},this.getCamera=function(){return V},this.getFoveation=function(){return null!==w?w.fixedFoveation:null!==T?T.fixedFoveation:void 0},this.setFoveation=function(t){null!==w&&(w.fixedFoveation=t),null!==T&&void 0!==T.fixedFoveation&&(T.fixedFoveation=t)};let I=null;const N=new l.C;N.setAnimationLoop((function(e,i){if(x=i.getViewerPose(p),b=i,null!==x){const e=x.views;null!==T&&(t.setRenderTargetFramebuffer(M,T.framebuffer),t.setRenderTarget(M));let i=!1;e.length!==V.cameras.length&&(V.cameras.length=0,i=!0);for(let n=0;n<e.length;n++){const a=e[n];let r=null;if(null!==T)r=T.getViewport(a);else{const e=v.getViewSubImage(w,a);r=e.viewport,0===n&&(t.setRenderTargetTextures(M,e.colorTexture,w.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(M))}const s=L[n];s.matrix.fromArray(a.transform.matrix),s.projectionMatrix.fromArray(a.projectionMatrix),s.viewport.set(r.x,r.y,r.width,r.height),0===n&&V.matrix.copy(s.matrix),!0===i&&V.cameras.push(s)}}const n=a.inputSources;for(let t=0;t<S.length;t++){const e=S[t],a=n[t];e.update(a,i,p)}I&&I(e,i),b=null})),this.setAnimationLoop=function(t){I=t},this.dispose=function(){}}}},7365:(t,e,i)=>{i.d(e,{x:()=>a});var n=i(6469);class a extends n.T{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}a.prototype.isScene=!0},3882:(t,e,i)=>{i.d(e,{B:()=>r});var n=i(4467),a=i(1661);class r extends n.x{constructor(t,e,i,n,r,s,o,l,h,u){super(t=void 0!==t?t:[],e=void 0!==e?e:a.fY$,i,n,r,s,o,l,h,u),this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}r.prototype.isCubeTexture=!0},3993:(t,e,i)=>{i.d(e,{I:()=>r});var n=i(4467),a=i(1661);class r extends n.x{constructor(t=null,e=1,i=1,n,r,s,o,l,h=a.TyD,u=a.TyD,p,c){super(null,s,o,l,h,u,n,r,p,c),this.image={data:t,width:e,height:i},this.magFilter=h,this.minFilter=u,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}r.prototype.isDataTexture=!0},5491:(t,e,i)=>{i.d(e,{C:()=>r});var n=i(4467),a=i(1661);class r extends n.x{constructor(t=null,e=1,i=1,n=1){super(null),this.image={data:t,width:e,height:i,depth:n},this.magFilter=a.TyD,this.minFilter=a.TyD,this.wrapR=a.uWy,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}r.prototype.isDataTexture2DArray=!0},7962:(t,e,i)=>{i.d(e,{z:()=>r});var n=i(4467),a=i(1661);class r extends n.x{constructor(t=null,e=1,i=1,n=1){super(null),this.image={data:t,width:e,height:i,depth:n},this.magFilter=a.TyD,this.minFilter=a.TyD,this.wrapR=a.uWy,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}r.prototype.isDataTexture3D=!0},4467:(t,e,i)=>{i.d(e,{x:()=>u});var n=i(7406),a=i(1661),r=i(2043),s=i(1138),o=i(1273),l=i(5006);let h=0;class u extends n.p{constructor(t=u.DEFAULT_IMAGE,e=u.DEFAULT_MAPPING,i=a.uWy,n=a.uWy,l=a.wem,p=a.D1R,c=a.wk1,d=a.ywz,m=1,g=a.rnI){super(),Object.defineProperty(this,"id",{value:h++}),this.uuid=r.DO(),this.name="",this.image=t,this.mipmaps=[],this.mapping=e,this.wrapS=i,this.wrapT=n,this.magFilter=l,this.minFilter=p,this.anisotropy=m,this.format=c,this.internalFormat=null,this.type=d,this.offset=new s.F(0,0),this.repeat=new s.F(1,1),this.center=new s.F(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new o.V,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=g,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const n=this.image;if(void 0===n.uuid&&(n.uuid=r.DO()),!e&&void 0===t.images[n.uuid]){let e;if(Array.isArray(n)){e=[];for(let t=0,i=n.length;t<i;t++)n[t].isDataTexture?e.push(p(n[t].image)):e.push(p(n[t]))}else e=p(n);t.images[n.uuid]={uuid:n.uuid,url:e}}i.image=n.uuid}return"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==a.xfE)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case a.rpg:t.x=t.x-Math.floor(t.x);break;case a.uWy:t.x=t.x<0?0:1;break;case a.OoA:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case a.rpg:t.y=t.y-Math.floor(t.y);break;case a.uWy:t.y=t.y<0?0:1;break;case a.OoA:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&this.version++}}function p(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?l.P.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}u.DEFAULT_IMAGE=void 0,u.DEFAULT_MAPPING=a.xfE,u.prototype.isTexture=!0},392:(t,e,i)=>{function n(t){if(0===t.length)return-1/0;let e=t[0];for(let i=1,n=t.length;i<n;++i)t[i]>e&&(e=t[i]);return e}i.d(e,{uH:()=>n,c:()=>a,Wu:()=>r});Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function a(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function r(t,e=0){let i=3735928559^e,n=1103547991^e;for(let e,a=0;a<t.length;a++)e=t.charCodeAt(a),i=Math.imul(i^e,2654435761),n=Math.imul(n^e,1597334677);return i=Math.imul(i^i>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507)^Math.imul(i^i>>>13,3266489909),4294967296*(2097151&n)+(i>>>0)}}}]);