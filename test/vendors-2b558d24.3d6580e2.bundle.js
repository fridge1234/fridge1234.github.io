"use strict";(self.webpackChunkouterspace_webpack=self.webpackChunkouterspace_webpack||[]).push([[78],{140:(t,e,r)=>{r.d(e,{a$:()=>p,lC:()=>c,ql:()=>d,Tl:()=>l});var i=r(223),s=r(6881),n=r(1138),a=r(3662),o=r(1661);const u=new s.P,h=new n.F;class l{constructor(t,e,r){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===r,this.usage=o.W2J,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,r){t*=this.itemSize,r*=e.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[t+i]=e.array[r+i];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const e=this.array;let r=0;for(let i=0,s=t.length;i<s;i++){let s=t[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),s=new a.I),e[r++]=s.r,e[r++]=s.g,e[r++]=s.b}return this}copyVector2sArray(t){const e=this.array;let r=0;for(let i=0,s=t.length;i<s;i++){let s=t[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),s=new n.F),e[r++]=s.x,e[r++]=s.y}return this}copyVector3sArray(t){const e=this.array;let r=0;for(let i=0,n=t.length;i<n;i++){let n=t[i];void 0===n&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),n=new s.P),e[r++]=n.x,e[r++]=n.y,e[r++]=n.z}return this}copyVector4sArray(t){const e=this.array;let r=0;for(let s=0,n=t.length;s<n;s++){let n=t[s];void 0===n&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",s),n=new i.L),e[r++]=n.x,e[r++]=n.y,e[r++]=n.z,e[r++]=n.w}return this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,r=this.count;e<r;e++)h.fromBufferAttribute(this,e),h.applyMatrix3(t),this.setXY(e,h.x,h.y);else if(3===this.itemSize)for(let e=0,r=this.count;e<r;e++)u.fromBufferAttribute(this,e),u.applyMatrix3(t),this.setXYZ(e,u.x,u.y,u.z);return this}applyMatrix4(t){for(let e=0,r=this.count;e<r;e++)u.x=this.getX(e),u.y=this.getY(e),u.z=this.getZ(e),u.applyMatrix4(t),this.setXYZ(e,u.x,u.y,u.z);return this}applyNormalMatrix(t){for(let e=0,r=this.count;e<r;e++)u.x=this.getX(e),u.y=this.getY(e),u.z=this.getZ(e),u.applyNormalMatrix(t),this.setXYZ(e,u.x,u.y,u.z);return this}transformDirection(t){for(let e=0,r=this.count;e<r;e++)u.x=this.getX(e),u.y=this.getY(e),u.z=this.getZ(e),u.transformDirection(t),this.setXYZ(e,u.x,u.y,u.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){return this.array[t*this.itemSize]}setX(t,e){return this.array[t*this.itemSize]=e,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,e){return this.array[t*this.itemSize+1]=e,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,e){return this.array[t*this.itemSize+2]=e,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,e){return this.array[t*this.itemSize+3]=e,this}setXY(t,e,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=r,this}setXYZ(t,e,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=r,this.array[t+2]=i,this}setXYZW(t,e,r,i,s){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=r,this.array[t+2]=i,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==o.W2J&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}}l.prototype.isBufferAttribute=!0;class d extends l{constructor(t,e,r){super(new Uint16Array(t),e,r)}}class c extends l{constructor(t,e,r){super(new Uint32Array(t),e,r)}}(class extends l{constructor(t,e,r){super(new Uint16Array(t),e,r)}}).prototype.isFloat16BufferAttribute=!0;class p extends l{constructor(t,e,r){super(new Float32Array(t),e,r)}}},9046:(t,e,r)=>{r.d(e,{u:()=>w});var i=r(6881),s=r(1138),n=r(1898),a=r(7406),o=r(140),u=r(4699),h=r(6469),l=r(9203),d=r(1273),c=r(2043),p=r(392);let m=0;const f=new l.y,g=new h.T,y=new i.P,x=new n.Z,v=new n.Z,b=new i.P;class w extends a.p{constructor(){super(),Object.defineProperty(this,"id",{value:m++}),this.uuid=c.DO(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new((0,p.uH)(t)>65535?o.lC:o.ql)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,r=0){this.groups.push({start:t,count:e,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const r=this.attributes.normal;if(void 0!==r){const e=(new d.V).getNormalMatrix(t);r.applyNormalMatrix(e),r.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return f.makeRotationFromQuaternion(t),this.applyMatrix4(f),this}rotateX(t){return f.makeRotationX(t),this.applyMatrix4(f),this}rotateY(t){return f.makeRotationY(t),this.applyMatrix4(f),this}rotateZ(t){return f.makeRotationZ(t),this.applyMatrix4(f),this}translate(t,e,r){return f.makeTranslation(t,e,r),this.applyMatrix4(f),this}scale(t,e,r){return f.makeScale(t,e,r),this.applyMatrix4(f),this}lookAt(t){return g.lookAt(t),g.updateMatrix(),this.applyMatrix4(g.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(y).negate(),this.translate(y.x,y.y,y.z),this}setFromPoints(t){const e=[];for(let r=0,i=t.length;r<i;r++){const i=t[r];e.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new o.a$(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new n.Z);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new i.P(-1/0,-1/0,-1/0),new i.P(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,r=e.length;t<r;t++){const r=e[t];x.setFromBufferAttribute(r),this.morphTargetsRelative?(b.addVectors(this.boundingBox.min,x.min),this.boundingBox.expandByPoint(b),b.addVectors(this.boundingBox.max,x.max),this.boundingBox.expandByPoint(b)):(this.boundingBox.expandByPoint(x.min),this.boundingBox.expandByPoint(x.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new u.a);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new i.P,1/0);if(t){const r=this.boundingSphere.center;if(x.setFromBufferAttribute(t),e)for(let t=0,r=e.length;t<r;t++){const r=e[t];v.setFromBufferAttribute(r),this.morphTargetsRelative?(b.addVectors(x.min,v.min),x.expandByPoint(b),b.addVectors(x.max,v.max),x.expandByPoint(b)):(x.expandByPoint(v.min),x.expandByPoint(v.max))}x.getCenter(r);let i=0;for(let e=0,s=t.count;e<s;e++)b.fromBufferAttribute(t,e),i=Math.max(i,r.distanceToSquared(b));if(e)for(let s=0,n=e.length;s<n;s++){const n=e[s],a=this.morphTargetsRelative;for(let e=0,s=n.count;e<s;e++)b.fromBufferAttribute(n,e),a&&(y.fromBufferAttribute(t,e),b.add(y)),i=Math.max(i,r.distanceToSquared(b))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const r=t.array,n=e.position.array,a=e.normal.array,u=e.uv.array,h=n.length/3;void 0===e.tangent&&this.setAttribute("tangent",new o.Tl(new Float32Array(4*h),4));const l=e.tangent.array,d=[],c=[];for(let t=0;t<h;t++)d[t]=new i.P,c[t]=new i.P;const p=new i.P,m=new i.P,f=new i.P,g=new s.F,y=new s.F,x=new s.F,v=new i.P,b=new i.P;function w(t,e,r){p.fromArray(n,3*t),m.fromArray(n,3*e),f.fromArray(n,3*r),g.fromArray(u,2*t),y.fromArray(u,2*e),x.fromArray(u,2*r),m.sub(p),f.sub(p),y.sub(g),x.sub(g);const i=1/(y.x*x.y-x.x*y.y);isFinite(i)&&(v.copy(m).multiplyScalar(x.y).addScaledVector(f,-y.y).multiplyScalar(i),b.copy(f).multiplyScalar(y.x).addScaledVector(m,-x.x).multiplyScalar(i),d[t].add(v),d[e].add(v),d[r].add(v),c[t].add(b),c[e].add(b),c[r].add(b))}let S=this.groups;0===S.length&&(S=[{start:0,count:r.length}]);for(let t=0,e=S.length;t<e;++t){const e=S[t],i=e.start;for(let t=i,s=i+e.count;t<s;t+=3)w(r[t+0],r[t+1],r[t+2])}const A=new i.P,M=new i.P,B=new i.P,T=new i.P;function z(t){B.fromArray(a,3*t),T.copy(B);const e=d[t];A.copy(e),A.sub(B.multiplyScalar(B.dot(e))).normalize(),M.crossVectors(T,e);const r=M.dot(c[t])<0?-1:1;l[4*t]=A.x,l[4*t+1]=A.y,l[4*t+2]=A.z,l[4*t+3]=r}for(let t=0,e=S.length;t<e;++t){const e=S[t],i=e.start;for(let t=i,s=i+e.count;t<s;t+=3)z(r[t+0]),z(r[t+1]),z(r[t+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let r=this.getAttribute("normal");if(void 0===r)r=new o.Tl(new Float32Array(3*e.count),3),this.setAttribute("normal",r);else for(let t=0,e=r.count;t<e;t++)r.setXYZ(t,0,0,0);const s=new i.P,n=new i.P,a=new i.P,u=new i.P,h=new i.P,l=new i.P,d=new i.P,c=new i.P;if(t)for(let i=0,o=t.count;i<o;i+=3){const o=t.getX(i+0),p=t.getX(i+1),m=t.getX(i+2);s.fromBufferAttribute(e,o),n.fromBufferAttribute(e,p),a.fromBufferAttribute(e,m),d.subVectors(a,n),c.subVectors(s,n),d.cross(c),u.fromBufferAttribute(r,o),h.fromBufferAttribute(r,p),l.fromBufferAttribute(r,m),u.add(d),h.add(d),l.add(d),r.setXYZ(o,u.x,u.y,u.z),r.setXYZ(p,h.x,h.y,h.z),r.setXYZ(m,l.x,l.y,l.z)}else for(let t=0,i=e.count;t<i;t+=3)s.fromBufferAttribute(e,t+0),n.fromBufferAttribute(e,t+1),a.fromBufferAttribute(e,t+2),d.subVectors(a,n),c.subVectors(s,n),d.cross(c),r.setXYZ(t+0,d.x,d.y,d.z),r.setXYZ(t+1,d.x,d.y,d.z),r.setXYZ(t+2,d.x,d.y,d.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const r=this.attributes;for(const i in r){if(void 0===t.attributes[i])continue;const s=r[i].array,n=t.attributes[i],a=n.array,o=n.itemSize*e,u=Math.min(a.length,s.length-o);for(let t=0,e=o;t<u;t++,e++)s[e]=a[t]}return this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,r=t.count;e<r;e++)b.fromBufferAttribute(t,e),b.normalize(),t.setXYZ(e,b.x,b.y,b.z)}toNonIndexed(){function t(t,e){const r=t.array,i=t.itemSize,s=t.normalized,n=new r.constructor(e.length*i);let a=0,u=0;for(let s=0,o=e.length;s<o;s++){a=t.isInterleavedBufferAttribute?e[s]*t.data.stride+t.offset:e[s]*i;for(let t=0;t<i;t++)n[u++]=r[a++]}return new o.Tl(n,i,s)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new w,r=this.index.array,i=this.attributes;for(const s in i){const n=t(i[s],r);e.setAttribute(s,n)}const s=this.morphAttributes;for(const i in s){const n=[],a=s[i];for(let e=0,i=a.length;e<i;e++){const i=t(a[e],r);n.push(i)}e.morphAttributes[i]=n}e.morphTargetsRelative=this.morphTargetsRelative;const n=this.groups;for(let t=0,r=n.length;t<r;t++){const r=n[t];e.addGroup(r.start,r.count,r.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const r in e)void 0!==e[r]&&(t[r]=e[r]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const r=this.attributes;for(const e in r){const i=r[e];t.data.attributes[e]=i.toJSON(t.data)}const i={};let s=!1;for(const e in this.morphAttributes){const r=this.morphAttributes[e],n=[];for(let e=0,i=r.length;e<i;e++){const i=r[e];n.push(i.toJSON(t.data))}n.length>0&&(i[e]=n,s=!0)}s&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const n=this.groups;n.length>0&&(t.data.groups=JSON.parse(JSON.stringify(n)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const r=t.index;null!==r&&this.setIndex(r.clone(e));const i=t.attributes;for(const t in i){const r=i[t];this.setAttribute(t,r.clone(e))}const s=t.morphAttributes;for(const t in s){const r=[],i=s[t];for(let t=0,s=i.length;t<s;t++)r.push(i[t].clone(e));this.morphAttributes[t]=r}this.morphTargetsRelative=t.morphTargetsRelative;const n=t.groups;for(let t=0,e=n.length;t<e;t++){const e=n[t];this.addGroup(e.start,e.count,e.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const o=t.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}w.prototype.isBufferGeometry=!0},7406:(t,e,r)=>{r.d(e,{p:()=>i});class i{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const r=this._listeners;void 0===r[t]&&(r[t]=[]),-1===r[t].indexOf(e)&&r[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const r=this._listeners;return void 0!==r[t]&&-1!==r[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const r=this._listeners[t];if(void 0!==r){const t=r.indexOf(e);-1!==t&&r.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const r=e.slice(0);for(let e=0,i=r.length;e<i;e++)r[e].call(this,t);t.target=null}}}},2133:(t,e,r)=>{r.d(e,{v:()=>n});var i=r(2043),s=r(1661);class n{constructor(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=s.W2J,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=i.DO()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,r){t*=this.stride,r*=e.stride;for(let i=0,s=this.stride;i<s;i++)this.array[t+i]=e.array[r+i];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=i.DO()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(e,this.stride);return r.setUsage(this.usage),r}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=i.DO()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}n.prototype.isInterleavedBuffer=!0},1145:(t,e,r)=>{r.d(e,{k:()=>a});var i=r(6881),s=r(140);const n=new i.P;class a{constructor(t,e,r,i=!1){this.name="",this.data=t,this.itemSize=e,this.offset=r,this.normalized=!0===i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,r=this.data.count;e<r;e++)n.x=this.getX(e),n.y=this.getY(e),n.z=this.getZ(e),n.applyMatrix4(t),this.setXYZ(e,n.x,n.y,n.z);return this}applyNormalMatrix(t){for(let e=0,r=this.count;e<r;e++)n.x=this.getX(e),n.y=this.getY(e),n.z=this.getZ(e),n.applyNormalMatrix(t),this.setXYZ(e,n.x,n.y,n.z);return this}transformDirection(t){for(let e=0,r=this.count;e<r;e++)n.x=this.getX(e),n.y=this.getY(e),n.z=this.getZ(e),n.transformDirection(t),this.setXYZ(e,n.x,n.y,n.z);return this}setX(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){return this.data.array[t*this.data.stride+this.offset]}getY(t){return this.data.array[t*this.data.stride+this.offset+1]}getZ(t){return this.data.array[t*this.data.stride+this.offset+2]}getW(t){return this.data.array[t*this.data.stride+this.offset+3]}setXY(t,e,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=r,this}setXYZ(t,e,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=r,this.data.array[t+2]=i,this}setXYZW(t,e,r,i,s){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=r,this.data.array[t+2]=i,this.data.array[t+3]=s,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const r=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[r+e])}return new s.Tl(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new a(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const r=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[r+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}a.prototype.isInterleavedBufferAttribute=!0},6469:(t,e,r)=>{r.d(e,{T:()=>M});var i=r(7092),s=r(6881),n=r(9203),a=r(7406),o=r(2903);class u{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}var h=r(1273),l=r(2043);let d=0;const c=new s.P,p=new i._,m=new n.y,f=new s.P,g=new s.P,y=new s.P,x=new i._,v=new s.P(1,0,0),b=new s.P(0,1,0),w=new s.P(0,0,1),S={type:"added"},A={type:"removed"};class M extends a.p{constructor(){super(),Object.defineProperty(this,"id",{value:d++}),this.uuid=l.DO(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=M.DefaultUp.clone();const t=new s.P,e=new o.U,r=new i._,a=new s.P(1,1,1);e._onChange((function(){r.setFromEuler(e,!1)})),r._onChange((function(){e.setFromQuaternion(r,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new n.y},normalMatrix:{value:new h.V}}),this.matrix=new n.y,this.matrixWorld=new n.y,this.matrixAutoUpdate=M.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new u,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return p.setFromAxisAngle(t,e),this.quaternion.multiply(p),this}rotateOnWorldAxis(t,e){return p.setFromAxisAngle(t,e),this.quaternion.premultiply(p),this}rotateX(t){return this.rotateOnAxis(v,t)}rotateY(t){return this.rotateOnAxis(b,t)}rotateZ(t){return this.rotateOnAxis(w,t)}translateOnAxis(t,e){return c.copy(t).applyQuaternion(this.quaternion),this.position.add(c.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(v,t)}translateY(t){return this.translateOnAxis(b,t)}translateZ(t){return this.translateOnAxis(w,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(m.copy(this.matrixWorld).invert())}lookAt(t,e,r){t.isVector3?f.copy(t):f.set(t,e,r);const i=this.parent;this.updateWorldMatrix(!0,!1),g.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?m.lookAt(g,f,this.up):m.lookAt(f,g,this.up),this.quaternion.setFromRotationMatrix(m),i&&(m.extractRotation(i.matrixWorld),p.setFromRotationMatrix(m),this.quaternion.premultiply(p.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(S)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(A)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(A)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),m.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),m.multiply(t.parent.matrixWorld)),t.applyMatrix4(m),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let r=0,i=this.children.length;r<i;r++){const i=this.children[r].getObjectByProperty(t,e);if(void 0!==i)return i}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(g,t,y),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(g,x,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let r=0,i=e.length;r<i;r++)e[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let r=0,i=e.length;r<i;r++)e[r].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let r=0,i=e.length;r<i;r++)e[r].updateMatrixWorld(t)}updateWorldMatrix(t,e){const r=this.parent;if(!0===t&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,r=t.length;e<r;e++)t[e].updateWorldMatrix(!1,!0)}}toJSON(t){const e=void 0===t||"string"==typeof t,r={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};function s(e,r){return void 0===e[r.uuid]&&(e[r.uuid]=r.toJSON(t)),r.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const r=e.shapes;if(Array.isArray(r))for(let e=0,i=r.length;e<i;e++){const i=r[e];s(t.shapes,i)}else s(t.shapes,r)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let r=0,i=this.material.length;r<i;r++)e.push(s(t.materials,this.material[r]));i.material=e}else i.material=s(t.materials,this.material);if(this.children.length>0){i.children=[];for(let e=0;e<this.children.length;e++)i.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let e=0;e<this.animations.length;e++){const r=this.animations[e];i.animations.push(s(t.animations,r))}}if(e){const e=n(t.geometries),i=n(t.materials),s=n(t.textures),a=n(t.images),o=n(t.shapes),u=n(t.skeletons),h=n(t.animations);e.length>0&&(r.geometries=e),i.length>0&&(r.materials=i),s.length>0&&(r.textures=s),a.length>0&&(r.images=a),o.length>0&&(r.shapes=o),u.length>0&&(r.skeletons=u),h.length>0&&(r.animations=h)}return r.object=i,r;function n(t){const e=[];for(const r in t){const i=t[r];delete i.metadata,e.push(i)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const r=t.children[e];this.add(r.clone())}return this}}M.DefaultUp=new s.P(0,1,0),M.DefaultMatrixAutoUpdate=!0,M.prototype.isObject3D=!0},5006:(t,e,r)=>{r.d(e,{P:()=>n});var i=r(392);let s;class n{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===s&&(s=(0,i.c)("canvas")),s.width=t.width,s.height=t.height;const r=s.getContext("2d");t instanceof ImageData?r.putImageData(t,0,0):r.drawImage(t,0,0,t.width,t.height),e=s}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}}},6034:(t,e,r)=>{r.d(e,{a:()=>E});var i=r(1661),s=r(140),n=r(9046),a=r(6454),o=r(3131),u=r(1051),h=r(8549),l=r(1138),d=r(6881),c=r(3662),p=r(4302),m=r(6173),f=r(6724);const g=Math.pow(2,8),y=[.125,.215,.35,.446,.526,.582],x=5+y.length,v=20,b={[i.rnI]:0,[i.knz]:1,[i.KC9]:2,[i.LgE]:3,[i.Inb]:4,[i.gMp]:5,[i.pMV]:6},w=new o.i,{_lodPlanes:S,_sizeLods:A,_sigmas:M}=R(),B=new c.I;let T=null;const z=(1+Math.sqrt(5))/2,_=1/z,P=[new d.P(1,1,1),new d.P(-1,1,1),new d.P(1,1,-1),new d.P(-1,1,-1),new d.P(0,z,_),new d.P(0,z,-_),new d.P(_,0,z),new d.P(-_,0,z),new d.P(z,_,0),new d.P(-z,_,0)];class E{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=function(t){const e=new Float32Array(t),r=new d.P(0,1,0);return new h.F({name:"SphericalGaussianBlur",defines:{n:t},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r},inputEncoding:{value:b[i.rnI]},outputEncoding:{value:b[i.rnI]}},vertexShader:N(),fragmentShader:`precision mediump float;precision mediump int;varying vec3 vOutputDirection;uniform sampler2D envMap;uniform int samples;uniform float weights[n];uniform bool latitudinal;uniform float dTheta;uniform float mipInt;uniform vec3 poleAxis;\n${U()}\n#define ENVMAP_TYPE_CUBE_UV\n#include <cube_uv_reflection_fragment>\nvec3 getSample(float theta,vec3 axis){float cosTheta=cos(theta);vec3 sampleDirection=vOutputDirection*cosTheta+cross(axis,vOutputDirection)*sin(theta)+axis*dot(axis,vOutputDirection)*(1.0-cosTheta);return bilinearCubeUV(envMap,sampleDirection,mipInt);}void main(){vec3 axis=latitudinal?poleAxis:cross(poleAxis,vOutputDirection);if(all(equal(axis,vec3(0.0)))){axis=vec3(vOutputDirection.z,0.0,-vOutputDirection.x);}axis=normalize(axis);gl_FragColor=vec4(0.0,0.0,0.0,1.0);gl_FragColor.rgb+=weights[0]*getSample(0.0,axis);for(int i=1;i<n;i++){if(i>=samples){break;}float theta=dTheta*float(i);gl_FragColor.rgb+=weights[i]*getSample(-1.0*theta,axis);gl_FragColor.rgb+=weights[i]*getSample(theta,axis);}gl_FragColor=linearToOutputTexel(gl_FragColor);}`,blending:i.jFi,depthTest:!1,depthWrite:!1})}(v),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,r=.1,i=100){T=this._renderer.getRenderTarget();const s=this._allocateTargets();return this._sceneToCubeUV(t,r,i,s),e>0&&this._blur(s,0,0,e),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(t){return this._fromTexture(t)}fromCubemap(t){return this._fromTexture(t)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=F(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=k(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let t=0;t<S.length;t++)S[t].dispose()}_cleanup(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(T),t.scissorTest=!1,C(t,0,0,t.width,t.height)}_fromTexture(t){T=this._renderer.getRenderTarget();const e=this._allocateTargets(t);return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e}_allocateTargets(t){const e={magFilter:i.TyD,minFilter:i.TyD,generateMipmaps:!1,type:i.ywz,format:i.aoB,encoding:O(t)?t.encoding:i.KC9,depthBuffer:!1},r=D(e);return r.depthBuffer=!t,this._pingPongRenderTarget=D(e),r}_compileMaterial(t){const e=new a.K(S[0],t);this._renderer.compile(e,w)}_sceneToCubeUV(t,e,r,s){const n=new u.c(90,1,e,r),o=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],l=this._renderer,d=l.autoClear,c=l.outputEncoding,p=l.toneMapping;l.getClearColor(B),l.toneMapping=i.uL9,l.outputEncoding=i.rnI,l.autoClear=!1;const y=new m.v({name:"PMREM.Background",side:i._Li,depthWrite:!1,depthTest:!1}),x=new a.K(new f.D,y);let v=!1;const b=t.background;b?b.isColor&&(y.color.copy(b),t.background=null,v=!0):(y.color.copy(B),v=!0);for(let e=0;e<6;e++){const r=e%3;0==r?(n.up.set(0,o[e],0),n.lookAt(h[e],0,0)):1==r?(n.up.set(0,0,o[e]),n.lookAt(0,h[e],0)):(n.up.set(0,o[e],0),n.lookAt(0,0,h[e])),C(s,r*g,e>2?g:0,g,g),l.setRenderTarget(s),v&&l.render(x,n),l.render(t,n)}x.geometry.dispose(),x.material.dispose(),l.toneMapping=p,l.outputEncoding=c,l.autoClear=d,t.background=b}_setEncoding(t,e){t.value=b[e.encoding]}_textureToCubeUV(t,e){const r=this._renderer,s=t.mapping===i.fY$||t.mapping===i.vxC;s?null==this._cubemapShader&&(this._cubemapShader=F()):null==this._equirectShader&&(this._equirectShader=k());const n=s?this._cubemapShader:this._equirectShader,o=new a.K(S[0],n),u=n.uniforms;u.envMap.value=t,s||u.texelSize.value.set(1/t.image.width,1/t.image.height),this._setEncoding(u.inputEncoding,t),this._setEncoding(u.outputEncoding,e.texture),C(e,0,0,3*g,2*g),r.setRenderTarget(e),r.render(o,w)}_applyPMREM(t){const e=this._renderer,r=e.autoClear;e.autoClear=!1;for(let e=1;e<x;e++){const r=Math.sqrt(M[e]*M[e]-M[e-1]*M[e-1]),i=P[(e-1)%P.length];this._blur(t,e-1,e,r,i)}e.autoClear=r}_blur(t,e,r,i,s){const n=this._pingPongRenderTarget;this._halfBlur(t,n,e,r,i,"latitudinal",s),this._halfBlur(n,t,r,r,i,"longitudinal",s)}_halfBlur(t,e,r,i,s,n,o){const u=this._renderer,h=this._blurMaterial;"latitudinal"!==n&&"longitudinal"!==n&&console.error("blur direction must be either latitudinal or longitudinal!");const l=new a.K(S[i],h),d=h.uniforms,c=A[r]-1,p=isFinite(s)?Math.PI/(2*c):2*Math.PI/39,m=s/p,f=isFinite(s)?1+Math.floor(3*m):v;f>v&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);const y=[];let x=0;for(let t=0;t<v;++t){const e=t/m,r=Math.exp(-e*e/2);y.push(r),0==t?x+=r:t<f&&(x+=2*r)}for(let t=0;t<y.length;t++)y[t]=y[t]/x;d.envMap.value=t.texture,d.samples.value=f,d.weights.value=y,d.latitudinal.value="latitudinal"===n,o&&(d.poleAxis.value=o),d.dTheta.value=p,d.mipInt.value=8-r,this._setEncoding(d.inputEncoding,t.texture),this._setEncoding(d.outputEncoding,t.texture);const b=A[i];C(e,3*Math.max(0,g-2*b),(0===i?0:2*g)+2*b*(i>4?i-8+4:0),3*b,2*b),u.setRenderTarget(e),u.render(l,w)}}function O(t){return void 0!==t&&t.type===i.ywz&&(t.encoding===i.rnI||t.encoding===i.knz||t.encoding===i.pMV)}function R(){const t=[],e=[],r=[];let i=8;for(let a=0;a<x;a++){const o=Math.pow(2,i);e.push(o);let u=1/o;a>4?u=y[a-8+4-1]:0==a&&(u=0),r.push(u);const h=1/(o-1),l=-h/2,d=1+h/2,c=[l,l,d,l,d,d,l,l,d,d,l,d],p=6,m=6,f=3,g=2,x=1,v=new Float32Array(f*m*p),b=new Float32Array(g*m*p),w=new Float32Array(x*m*p);for(let t=0;t<p;t++){const e=t%3*2/3-1,r=t>2?0:-1,i=[e,r,0,e+2/3,r,0,e+2/3,r+1,0,e,r,0,e+2/3,r+1,0,e,r+1,0];v.set(i,f*m*t),b.set(c,g*m*t);const s=[t,t,t,t,t,t];w.set(s,x*m*t)}const S=new n.u;S.setAttribute("position",new s.Tl(v,f)),S.setAttribute("uv",new s.Tl(b,g)),S.setAttribute("faceIndex",new s.Tl(w,x)),t.push(S),i>4&&i--}return{_lodPlanes:t,_sizeLods:e,_sigmas:r}}function D(t){const e=new p.d(3*g,3*g,t);return e.texture.mapping=i.g8_,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function C(t,e,r,i,s){t.viewport.set(e,r,i,s),t.scissor.set(e,r,i,s)}function k(){const t=new l.F(1,1);return new h.F({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:t},inputEncoding:{value:b[i.rnI]},outputEncoding:{value:b[i.rnI]}},vertexShader:N(),fragmentShader:`precision mediump float;precision mediump int;varying vec3 vOutputDirection;uniform sampler2D envMap;uniform vec2 texelSize;\n${U()}\n#include <common>\nvoid main(){gl_FragColor=vec4(0.0,0.0,0.0,1.0);vec3 outputDirection=normalize(vOutputDirection);vec2 uv=equirectUv(outputDirection);vec2 f=fract(uv/texelSize-0.5);uv-=f*texelSize;vec3 tl=envMapTexelToLinear(texture2D(envMap,uv)).rgb;uv.x+=texelSize.x;vec3 tr=envMapTexelToLinear(texture2D(envMap,uv)).rgb;uv.y+=texelSize.y;vec3 br=envMapTexelToLinear(texture2D(envMap,uv)).rgb;uv.x-=texelSize.x;vec3 bl=envMapTexelToLinear(texture2D(envMap,uv)).rgb;vec3 tm=mix(tl,tr,f.x);vec3 bm=mix(bl,br,f.x);gl_FragColor.rgb=mix(tm,bm,f.y);gl_FragColor=linearToOutputTexel(gl_FragColor);}`,blending:i.jFi,depthTest:!1,depthWrite:!1})}function F(){return new h.F({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:b[i.rnI]},outputEncoding:{value:b[i.rnI]}},vertexShader:N(),fragmentShader:`precision mediump float;precision mediump int;varying vec3 vOutputDirection;uniform samplerCube envMap;\n${U()}\nvoid main(){gl_FragColor=vec4(0.0,0.0,0.0,1.0);gl_FragColor.rgb=envMapTexelToLinear(textureCube(envMap,vec3(-vOutputDirection.x,vOutputDirection.yz))).rgb;gl_FragColor=linearToOutputTexel(gl_FragColor);}`,blending:i.jFi,depthTest:!1,depthWrite:!1})}function N(){return"precision mediump float;precision mediump int;attribute vec3 position;attribute vec2 uv;attribute float faceIndex;varying vec3 vOutputDirection;vec3 getDirection(vec2 uv,float face){uv=2.0*uv-1.0;vec3 direction=vec3(uv,1.0);if(face==0.0){direction=direction.zyx;}else if(face==1.0){direction=direction.xzy;direction.xz*=-1.0;}else if(face==2.0){direction.x*=-1.0;}else if(face==3.0){direction=direction.zyx;direction.xz*=-1.0;}else if(face==4.0){direction=direction.xzy;direction.xy*=-1.0;}else if(face==5.0){direction.z*=-1.0;}return direction;}void main(){vOutputDirection=getDirection(uv,faceIndex);gl_Position=vec4(position,1.0);}"}function U(){return"uniform int inputEncoding;uniform int outputEncoding;\n#include <encodings_pars_fragment>\nvec4 inputTexelToLinear(vec4 value){if(inputEncoding==0){return value;}else if(inputEncoding==1){return sRGBToLinear(value);}else if(inputEncoding==2){return RGBEToLinear(value);}else if(inputEncoding==3){return RGBMToLinear(value,7.0);}else if(inputEncoding==4){return RGBMToLinear(value,16.0);}else if(inputEncoding==5){return RGBDToLinear(value,256.0);}else{return GammaToLinear(value,2.2);}}vec4 linearToOutputTexel(vec4 value){if(outputEncoding==0){return value;}else if(outputEncoding==1){return LinearTosRGB(value);}else if(outputEncoding==2){return LinearToRGBE(value);}else if(outputEncoding==3){return LinearToRGBM(value,7.0);}else if(outputEncoding==4){return LinearToRGBM(value,16.0);}else if(outputEncoding==5){return LinearToRGBD(value,256.0);}else{return LinearToGamma(value,2.2);}}vec4 envMapTexelToLinear(vec4 color){return inputTexelToLinear(color);}"}},6724:(t,e,r)=>{r.d(e,{D:()=>a});var i=r(9046),s=r(140),n=r(6881);class a extends i.u{constructor(t=1,e=1,r=1,i=1,a=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:r,widthSegments:i,heightSegments:a,depthSegments:o};const u=this;i=Math.floor(i),a=Math.floor(a),o=Math.floor(o);const h=[],l=[],d=[],c=[];let p=0,m=0;function f(t,e,r,i,s,a,o,f,g,y,x){const v=a/g,b=o/y,w=a/2,S=o/2,A=f/2,M=g+1,B=y+1;let T=0,z=0;const _=new n.P;for(let n=0;n<B;n++){const a=n*b-S;for(let o=0;o<M;o++){const u=o*v-w;_[t]=u*i,_[e]=a*s,_[r]=A,l.push(_.x,_.y,_.z),_[t]=0,_[e]=0,_[r]=f>0?1:-1,d.push(_.x,_.y,_.z),c.push(o/g),c.push(1-n/y),T+=1}}for(let t=0;t<y;t++)for(let e=0;e<g;e++){const r=p+e+M*t,i=p+e+M*(t+1),s=p+(e+1)+M*(t+1),n=p+(e+1)+M*t;h.push(r,i,n),h.push(i,s,n),z+=6}u.addGroup(m,z,x),m+=z,p+=T}f("z","y","x",-1,-1,r,e,t,o,a,0),f("z","y","x",1,-1,r,e,-t,o,a,1),f("x","z","y",1,1,t,r,e,i,o,2),f("x","z","y",1,-1,t,r,-e,i,o,3),f("x","y","z",1,-1,t,e,r,i,a,4),f("x","y","z",-1,-1,t,e,-r,i,a,5),this.setIndex(h),this.setAttribute("position",new s.a$(l,3)),this.setAttribute("normal",new s.a$(d,3)),this.setAttribute("uv",new s.a$(c,2))}static fromJSON(t){return new a(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}},4078:(t,e,r)=>{r.d(e,{_:()=>n});var i=r(9046),s=r(140);class n extends i.u{constructor(t=1,e=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:r,heightSegments:i};const n=t/2,a=e/2,o=Math.floor(r),u=Math.floor(i),h=o+1,l=u+1,d=t/o,c=e/u,p=[],m=[],f=[],g=[];for(let t=0;t<l;t++){const e=t*c-a;for(let r=0;r<h;r++){const i=r*d-n;m.push(i,-e,0),f.push(0,0,1),g.push(r/o),g.push(1-t/u)}}for(let t=0;t<u;t++)for(let e=0;e<o;e++){const r=e+h*t,i=e+h*(t+1),s=e+1+h*(t+1),n=e+1+h*t;p.push(r,i,n),p.push(i,s,n)}this.setIndex(p),this.setAttribute("position",new s.a$(m,3)),this.setAttribute("normal",new s.a$(f,3)),this.setAttribute("uv",new s.a$(g,2))}static fromJSON(t){return new n(t.width,t.height,t.widthSegments,t.heightSegments)}}},2785:(t,e,r)=>{r.d(e,{x:()=>a});var i=r(9046),s=r(140),n=r(6881);class a extends i.u{constructor(t=1,e=32,r=16,i=0,a=2*Math.PI,o=0,u=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:r,phiStart:i,phiLength:a,thetaStart:o,thetaLength:u},e=Math.max(3,Math.floor(e)),r=Math.max(2,Math.floor(r));const h=Math.min(o+u,Math.PI);let l=0;const d=[],c=new n.P,p=new n.P,m=[],f=[],g=[],y=[];for(let s=0;s<=r;s++){const n=[],m=s/r;let x=0;0==s&&0==o?x=.5/e:s==r&&h==Math.PI&&(x=-.5/e);for(let r=0;r<=e;r++){const s=r/e;c.x=-t*Math.cos(i+s*a)*Math.sin(o+m*u),c.y=t*Math.cos(o+m*u),c.z=t*Math.sin(i+s*a)*Math.sin(o+m*u),f.push(c.x,c.y,c.z),p.copy(c).normalize(),g.push(p.x,p.y,p.z),y.push(s+x,1-m),n.push(l++)}d.push(n)}for(let t=0;t<r;t++)for(let i=0;i<e;i++){const e=d[t][i+1],s=d[t][i],n=d[t+1][i],a=d[t+1][i+1];(0!==t||o>0)&&m.push(e,s,a),(t!==r-1||h<Math.PI)&&m.push(s,n,a)}this.setIndex(m),this.setAttribute("position",new s.a$(f,3)),this.setAttribute("normal",new s.a$(g,3)),this.setAttribute("uv",new s.a$(y,2))}static fromJSON(t){return new a(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}},1043:(t,e,r)=>{r.d(e,{F:()=>a});var i=r(9046),s=r(140),n=r(6881);class a extends i.u{constructor(t=1,e=.4,r=64,i=8,a=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:r,radialSegments:i,p:a,q:o},r=Math.floor(r),i=Math.floor(i);const u=[],h=[],l=[],d=[],c=new n.P,p=new n.P,m=new n.P,f=new n.P,g=new n.P,y=new n.P,x=new n.P;for(let s=0;s<=r;++s){const n=s/r*a*Math.PI*2;v(n,a,o,t,m),v(n+.01,a,o,t,f),y.subVectors(f,m),x.addVectors(f,m),g.crossVectors(y,x),x.crossVectors(g,y),g.normalize(),x.normalize();for(let t=0;t<=i;++t){const n=t/i*Math.PI*2,a=-e*Math.cos(n),o=e*Math.sin(n);c.x=m.x+(a*x.x+o*g.x),c.y=m.y+(a*x.y+o*g.y),c.z=m.z+(a*x.z+o*g.z),h.push(c.x,c.y,c.z),p.subVectors(c,m).normalize(),l.push(p.x,p.y,p.z),d.push(s/r),d.push(t/i)}}for(let t=1;t<=r;t++)for(let e=1;e<=i;e++){const r=(i+1)*(t-1)+(e-1),s=(i+1)*t+(e-1),n=(i+1)*t+e,a=(i+1)*(t-1)+e;u.push(r,s,a),u.push(s,n,a)}function v(t,e,r,i,s){const n=Math.cos(t),a=Math.sin(t),o=r/e*t,u=Math.cos(o);s.x=i*(2+u)*.5*n,s.y=i*(2+u)*a*.5,s.z=i*Math.sin(o)*.5}this.setIndex(u),this.setAttribute("position",new s.a$(h,3)),this.setAttribute("normal",new s.a$(l,3)),this.setAttribute("uv",new s.a$(d,2))}static fromJSON(t){return new a(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}}}]);