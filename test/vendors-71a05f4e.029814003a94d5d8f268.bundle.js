"use strict";(self.webpackChunkouterspace_webpack=self.webpackChunkouterspace_webpack||[]).push([[551],{2304:(e,t,a)=>{function r(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,a,r){switch(t.calls++,a){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a)}}}}a.d(t,{I:()=>r})},2504:(e,t,a)=>{a.d(t,{J:()=>n});var r=a(1661);function n(e){function t(t,a){t.opacity.value=a.opacity,a.color&&t.diffuse.value.copy(a.color),a.emissive&&t.emissive.value.copy(a.emissive).multiplyScalar(a.emissiveIntensity),a.map&&(t.map.value=a.map),a.alphaMap&&(t.alphaMap.value=a.alphaMap),a.specularMap&&(t.specularMap.value=a.specularMap),a.alphaTest>0&&(t.alphaTest.value=a.alphaTest);const r=e.get(a).envMap;let n,i;r&&(t.envMap.value=r,t.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,t.reflectivity.value=a.reflectivity,t.ior.value=a.ior,t.refractionRatio.value=a.refractionRatio),a.lightMap&&(t.lightMap.value=a.lightMap,t.lightMapIntensity.value=a.lightMapIntensity),a.aoMap&&(t.aoMap.value=a.aoMap,t.aoMapIntensity.value=a.aoMapIntensity),a.map?n=a.map:a.specularMap?n=a.specularMap:a.displacementMap?n=a.displacementMap:a.normalMap?n=a.normalMap:a.bumpMap?n=a.bumpMap:a.roughnessMap?n=a.roughnessMap:a.metalnessMap?n=a.metalnessMap:a.alphaMap?n=a.alphaMap:a.emissiveMap?n=a.emissiveMap:a.clearcoatMap?n=a.clearcoatMap:a.clearcoatNormalMap?n=a.clearcoatNormalMap:a.clearcoatRoughnessMap?n=a.clearcoatRoughnessMap:a.specularIntensityMap?n=a.specularIntensityMap:a.specularColorMap?n=a.specularColorMap:a.transmissionMap?n=a.transmissionMap:a.thicknessMap?n=a.thicknessMap:a.sheenColorMap?n=a.sheenColorMap:a.sheenRoughnessMap&&(n=a.sheenRoughnessMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix)),a.aoMap?i=a.aoMap:a.lightMap&&(i=a.lightMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uv2Transform.value.copy(i.matrix))}function a(t,a){t.roughness.value=a.roughness,t.metalness.value=a.metalness,a.roughnessMap&&(t.roughnessMap.value=a.roughnessMap),a.metalnessMap&&(t.metalnessMap.value=a.metalnessMap),a.emissiveMap&&(t.emissiveMap.value=a.emissiveMap),a.bumpMap&&(t.bumpMap.value=a.bumpMap,t.bumpScale.value=a.bumpScale,a.side===r._Li&&(t.bumpScale.value*=-1)),a.normalMap&&(t.normalMap.value=a.normalMap,t.normalScale.value.copy(a.normalScale),a.side===r._Li&&t.normalScale.value.negate()),a.displacementMap&&(t.displacementMap.value=a.displacementMap,t.displacementScale.value=a.displacementScale,t.displacementBias.value=a.displacementBias);e.get(a).envMap&&(t.envMapIntensity.value=a.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,n,i,o,s){n.isMeshBasicMaterial?t(e,n):n.isMeshLambertMaterial?(t(e,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,n)):n.isMeshToonMaterial?(t(e,n),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===r._Li&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===r._Li&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isMeshPhongMaterial?(t(e,n),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===r._Li&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===r._Li&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isMeshStandardMaterial?(t(e,n),n.isMeshPhysicalMaterial?function(e,t,n){a(e,t),e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===r._Li&&e.clearcoatNormalScale.value.negate()));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,n,s):a(e,n)):n.isMeshMatcapMaterial?(t(e,n),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===r._Li&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===r._Li&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isMeshDepthMaterial?(t(e,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isMeshDistanceMaterial?(t(e,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,n)):n.isMeshNormalMaterial?(t(e,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===r._Li&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===r._Li&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,n)):n.isPointsMaterial?function(e,t,a,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*a,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,n,i,o):n.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let a;t.map?a=t.map:t.alphaMap&&(a=t.alphaMap);void 0!==a&&(!0===a.matrixAutoUpdate&&a.updateMatrix(),e.uvTransform.value.copy(a.matrix))}(e,n):n.isShadowMaterial?(e.color.value.copy(n.color),e.opacity.value=n.opacity):n.isShaderMaterial&&(n.uniformsNeedUpdate=!1)}}}},6738:(e,t,a)=>{a.d(t,{i:()=>c});var r=a(1661),n=a(5491),i=a(6881),o=a(1138);function s(e,t){return e[0]-t[0]}function l(e,t){return Math.abs(t[1])-Math.abs(e[1])}function u(e,t){let a=1;const r=t.isInterleavedBufferAttribute?t.data.array:t.array;r instanceof Int8Array?a=127:r instanceof Int16Array?a=32767:r instanceof Int32Array?a=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),e.divideScalar(a)}function c(e,t,a){const c={},p=new Float32Array(8),d=new WeakMap,f=new i.P,h=[];for(let e=0;e<8;e++)h[e]=[e,0];return{update:function(i,m,g,M){const b=i.morphTargetInfluences;if(!0===t.isWebGL2){const i=m.morphAttributes.position.length;let s=d.get(m);if(void 0===s||s.count!==i){void 0!==s&&s.texture.dispose();const e=void 0!==m.morphAttributes.normal,a=m.morphAttributes.position,l=m.morphAttributes.normal||[],c=!0===e?2:1;let p=m.attributes.position.count*c,h=1;p>t.maxTextureSize&&(h=Math.ceil(p/t.maxTextureSize),p=t.maxTextureSize);const g=new Float32Array(p*h*4*i),M=new n.C(g,p,h,i);M.format=r.wk1,M.type=r.VzW;const b=4*c;for(let t=0;t<i;t++){const r=a[t],n=l[t],i=p*h*4*t;for(let t=0;t<r.count;t++){f.fromBufferAttribute(r,t),!0===r.normalized&&u(f,r);const a=t*b;g[i+a+0]=f.x,g[i+a+1]=f.y,g[i+a+2]=f.z,g[i+a+3]=0,!0===e&&(f.fromBufferAttribute(n,t),!0===n.normalized&&u(f,n),g[i+a+4]=f.x,g[i+a+5]=f.y,g[i+a+6]=f.z,g[i+a+7]=0)}}s={count:i,texture:M,size:new o.F(p,h)},d.set(m,s)}let l=0;for(let e=0;e<b.length;e++)l+=b[e];const c=m.morphTargetsRelative?1:1-l;M.getUniforms().setValue(e,"morphTargetBaseInfluence",c),M.getUniforms().setValue(e,"morphTargetInfluences",b),M.getUniforms().setValue(e,"morphTargetsTexture",s.texture,a),M.getUniforms().setValue(e,"morphTargetsTextureSize",s.size)}else{const t=void 0===b?0:b.length;let a=c[m.id];if(void 0===a||a.length!==t){a=[];for(let e=0;e<t;e++)a[e]=[e,0];c[m.id]=a}for(let e=0;e<t;e++){const t=a[e];t[0]=e,t[1]=b[e]}a.sort(l);for(let e=0;e<8;e++)e<t&&a[e][1]?(h[e][0]=a[e][0],h[e][1]=a[e][1]):(h[e][0]=Number.MAX_SAFE_INTEGER,h[e][1]=0);h.sort(s);const r=m.morphAttributes.position,n=m.morphAttributes.normal;let i=0;for(let e=0;e<8;e++){const t=h[e],a=t[0],o=t[1];a!==Number.MAX_SAFE_INTEGER&&o?(r&&m.getAttribute("morphTarget"+e)!==r[a]&&m.setAttribute("morphTarget"+e,r[a]),n&&m.getAttribute("morphNormal"+e)!==n[a]&&m.setAttribute("morphNormal"+e,n[a]),p[e]=o,i+=o):(r&&!0===m.hasAttribute("morphTarget"+e)&&m.deleteAttribute("morphTarget"+e),n&&!0===m.hasAttribute("morphNormal"+e)&&m.deleteAttribute("morphNormal"+e),p[e]=0)}const o=m.morphTargetsRelative?1:1-i;M.getUniforms().setValue(e,"morphTargetBaseInfluence",o),M.getUniforms().setValue(e,"morphTargetInfluences",p)}}}}},4469:(e,t,a)=>{function r(e,t,a,r){let n=new WeakMap;function i(e){const t=e.target;t.removeEventListener("dispose",i),a.remove(t.instanceMatrix),null!==t.instanceColor&&a.remove(t.instanceColor)}return{update:function(e){const o=r.render.frame,s=e.geometry,l=t.get(e,s);return n.get(l)!==o&&(t.update(l),n.set(l,o)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",i)&&e.addEventListener("dispose",i),a.update(e.instanceMatrix,34962),null!==e.instanceColor&&a.update(e.instanceColor,34962)),l},dispose:function(){n=new WeakMap}}}a.d(t,{E:()=>r})},5502:(e,t,a)=>{a.d(t,{Z:()=>R});var r=a(1661),n=a(1895);function i(e,t,a){const r=e.createShader(t);return e.shaderSource(r,a),e.compileShader(r),r}var o=a(5567);let s=0;function l(e){switch(e){case r.rnI:return["Linear","( value )"];case r.knz:return["sRGB","( value )"];case r.KC9:return["RGBE","( value )"];case r.LgE:return["RGBM","( value, 7.0 )"];case r.Inb:return["RGBM","( value, 16.0 )"];case r.gMp:return["RGBD","( value, 256.0 )"];case r.pMV:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function u(e,t,a){const r=e.getShaderParameter(t,35713),n=e.getShaderInfoLog(t).trim();return r&&""===n?"":a.toUpperCase()+"\n\n"+n+"\n\n"+function(e){const t=e.split("\n");for(let e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}(e.getShaderSource(t))}function c(e,t){const a=l(t);return"vec4 "+e+"( vec4 value ) { return "+a[0]+"ToLinear"+a[1]+"; }"}function p(e,t){const a=l(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+a[0]+a[1]+"; }"}function d(e,t){let a;switch(t){case r.EoG:a="Linear";break;case r.CdI:a="Reinhard";break;case r.YGz:a="OptimizedCineon";break;case r.LY2:a="ACESFilmic";break;case r.dZ3:a="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),a="Linear"}return"vec3 "+e+"( vec3 color ) { return "+a+"ToneMapping( color ); }"}function f(e){return""!==e}function h(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function m(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const g=/^[ \t]*#include +<([\w\d./]+)>/gm;function M(e){return e.replace(g,b)}function b(e,t){const a=o.W[t];if(void 0===a)throw new Error("Can not resolve #include <"+t+">");return M(a)}const S=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,T=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function x(e){return e.replace(T,_).replace(S,v)}function v(e,t,a,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),_(e,t,a,r)}function _(e,t,a,r){let n="";for(let e=parseInt(t);e<parseInt(a);e++)n+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return n}function E(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function w(e,t,a,l){const g=e.getContext(),b=a.defines;let S=a.vertexShader,T=a.fragmentShader;const v=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===r._iA?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===r.ntZ?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===r.dwk&&(t="SHADOWMAP_TYPE_VSM"),t}(a),_=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case r.fY$:case r.vxC:t="ENVMAP_TYPE_CUBE";break;case r.g8_:case r.SVc:t="ENVMAP_TYPE_CUBE_UV"}return t}(a),w=function(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case r.vxC:case r.SVc:t="ENVMAP_MODE_REFRACTION"}return t}(a),L=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case r.Ns1:t="ENVMAP_BLENDING_MULTIPLY";break;case r.qhX:t="ENVMAP_BLENDING_MIX";break;case r.NDo:t="ENVMAP_BLENDING_ADD"}return t}(a),A=e.gammaFactor>0?e.gammaFactor:1,y=a.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(f).join("\n")}(a),R=function(e){const t=[];for(const a in e){const r=e[a];!1!==r&&t.push("#define "+a+" "+r)}return t.join("\n")}(b),P=g.createProgram();let C,D,F=a.glslVersion?"#version "+a.glslVersion+"\n":"";a.isRawShaderMaterial?(C=[R].filter(f).join("\n"),C.length>0&&(C+="\n"),D=[y,R].filter(f).join("\n"),D.length>0&&(D+="\n")):(C=[E(a),"#define SHADER_NAME "+a.shaderName,R,a.instancing?"#define USE_INSTANCING":"",a.instancingColor?"#define USE_INSTANCING_COLOR":"",a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+A,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+w:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoatMap?"#define USE_CLEARCOATMAP":"",a.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",a.specularColorMap?"#define USE_SPECULARCOLORMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.transmission?"#define USE_TRANSMISSION":"",a.transmissionMap?"#define USE_TRANSMISSIONMAP":"",a.thicknessMap?"#define USE_THICKNESSMAP":"",a.sheenColorMap?"#define USE_SHEENCOLORMAP":"",a.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.vertexAlphas?"#define USE_COLOR_ALPHA":"",a.vertexUvs?"#define USE_UV":"",a.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&!1===a.flatShading?"#define USE_MORPHNORMALS":"",a.morphTargets&&a.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",a.morphTargets&&a.isWebGL2?"#define MORPHTARGETS_COUNT "+a.morphTargetsCount:"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+v:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&a.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(f).join("\n"),D=[y,E(a),"#define SHADER_NAME "+a.shaderName,R,"#define GAMMA_FACTOR "+A,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+_:"",a.envMap?"#define "+w:"",a.envMap?"#define "+L:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoat?"#define USE_CLEARCOAT":"",a.clearcoatMap?"#define USE_CLEARCOATMAP":"",a.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",a.specularColorMap?"#define USE_SPECULARCOLORMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.alphaTest?"#define USE_ALPHATEST":"",a.sheen?"#define USE_SHEEN":"",a.sheenColorMap?"#define USE_SHEENCOLORMAP":"",a.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",a.transmission?"#define USE_TRANSMISSION":"",a.transmissionMap?"#define USE_TRANSMISSIONMAP":"",a.thicknessMap?"#define USE_THICKNESSMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors||a.instancingColor?"#define USE_COLOR":"",a.vertexAlphas?"#define USE_COLOR_ALPHA":"",a.vertexUvs?"#define USE_UV":"",a.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+v:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&a.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(a.extensionShaderTextureLOD||a.envMap)&&a.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",a.toneMapping!==r.uL9?"#define TONE_MAPPING":"",a.toneMapping!==r.uL9?o.W.tonemapping_pars_fragment:"",a.toneMapping!==r.uL9?d("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.format===r.UCm?"#define OPAQUE":"",o.W.encodings_pars_fragment,a.map?c("mapTexelToLinear",a.mapEncoding):"",a.matcap?c("matcapTexelToLinear",a.matcapEncoding):"",a.envMap?c("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMap?c("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.specularColorMap?c("specularColorMapTexelToLinear",a.specularColorMapEncoding):"",a.sheenColorMap?c("sheenColorMapTexelToLinear",a.sheenColorMapEncoding):"",a.lightMap?c("lightMapTexelToLinear",a.lightMapEncoding):"",p("linearToOutputTexel",a.outputEncoding),a.depthPacking?"#define DEPTH_PACKING "+a.depthPacking:"","\n"].filter(f).join("\n")),S=M(S),S=h(S,a),S=m(S,a),T=M(T),T=h(T,a),T=m(T,a),S=x(S),T=x(T),a.isWebGL2&&!0!==a.isRawShaderMaterial&&(F="#version 300 es\n",C=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+C,D=["#define varying in",a.glslVersion===r.LSk?"":"out highp vec4 pc_fragColor;",a.glslVersion===r.LSk?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+D);const I=F+D+T,U=i(g,35633,F+C+S),N=i(g,35632,I);if(g.attachShader(P,U),g.attachShader(P,N),void 0!==a.index0AttributeName?g.bindAttribLocation(P,0,a.index0AttributeName):!0===a.morphTargets&&g.bindAttribLocation(P,0,"position"),g.linkProgram(P),e.debug.checkShaderErrors){const e=g.getProgramInfoLog(P).trim(),t=g.getShaderInfoLog(U).trim(),a=g.getShaderInfoLog(N).trim();let r=!0,n=!0;if(!1===g.getProgramParameter(P,35714)){r=!1;const t=u(g,U,"vertex"),a=u(g,N,"fragment");console.error("THREE.WebGLProgram: Shader Error "+g.getError()+" - VALIDATE_STATUS "+g.getProgramParameter(P,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+a)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==t&&""!==a||(n=!1);n&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:C},fragmentShader:{log:a,prefix:D}})}let O,G;return g.deleteShader(U),g.deleteShader(N),this.getUniforms=function(){return void 0===O&&(O=new n.y(g,P)),O},this.getAttributes=function(){return void 0===G&&(G=function(e,t){const a={},r=e.getProgramParameter(t,35721);for(let n=0;n<r;n++){const r=e.getActiveAttrib(t,n),i=r.name;let o=1;35674===r.type&&(o=2),35675===r.type&&(o=3),35676===r.type&&(o=4),a[i]={type:r.type,location:e.getAttribLocation(t,i),locationSize:o}}return a}(g,P)),G},this.destroy=function(){l.releaseStatesOfProgram(this),g.deleteProgram(P),this.program=void 0},this.name=a.shaderName,this.id=s++,this.cacheKey=t,this.usedTimes=1,this.program=P,this.vertexShader=U,this.fragmentShader=N,this}var L=a(5967),A=a(6682),y=a(392);function R(e,t,a,n,i,o,s){const l=[],u=i.isWebGL2,c=i.logarithmicDepthBuffer,p=i.floatVertexTextures,d=i.maxVertexUniforms,f=i.vertexTextures;let h=i.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},g=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap",,"roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","specularIntensityMap","specularColorMap","specularColorMapEncoding","transmission","transmissionMap","thicknessMap","sheen","sheenColorMap","sheenColorMapEncoding","sheenRoughnessMap"];function M(e){let t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=r.rnI,t}return{getParameters:function(o,l,g,b,S){const T=b.fog,x=o.isMeshStandardMaterial?b.environment:null,v=(o.isMeshStandardMaterial?a:t).get(o.envMap||x),_=m[o.type],E=S.isSkinnedMesh?function(e){const t=e.skeleton.bones;if(p)return 1024;{const e=d,a=Math.floor((e-20)/4),r=Math.min(a,t.length);return r<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+r+"."),0):r}}(S):0;let w,A;if(null!==o.precision&&(h=i.getMaxPrecision(o.precision),h!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",h,"instead.")),_){const e=L.V[_];w=e.vertexShader,A=e.fragmentShader}else w=o.vertexShader,A=o.fragmentShader;const y=e.getRenderTarget(),R=o.alphaTest>0,P=o.clearcoat>0;return{isWebGL2:u,shaderID:_,shaderName:o.type,vertexShader:w,fragmentShader:A,defines:o.defines,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:h,instancing:!0===S.isInstancedMesh,instancingColor:!0===S.isInstancedMesh&&null!==S.instanceColor,supportsVertexTextures:f,outputEncoding:null!==y?M(y.texture):e.outputEncoding,map:!!o.map,mapEncoding:M(o.map),matcap:!!o.matcap,matcapEncoding:M(o.matcap),envMap:!!v,envMapMode:v&&v.mapping,envMapEncoding:M(v),envMapCubeUV:!!v&&(v.mapping===r.g8_||v.mapping===r.SVc),lightMap:!!o.lightMap,lightMapEncoding:M(o.lightMap),aoMap:!!o.aoMap,emissiveMap:!!o.emissiveMap,emissiveMapEncoding:M(o.emissiveMap),bumpMap:!!o.bumpMap,normalMap:!!o.normalMap,objectSpaceNormalMap:o.normalMapType===r.PA7,tangentSpaceNormalMap:o.normalMapType===r.IOt,clearcoat:P,clearcoatMap:P&&!!o.clearcoatMap,clearcoatRoughnessMap:P&&!!o.clearcoatRoughnessMap,clearcoatNormalMap:P&&!!o.clearcoatNormalMap,displacementMap:!!o.displacementMap,roughnessMap:!!o.roughnessMap,metalnessMap:!!o.metalnessMap,specularMap:!!o.specularMap,specularIntensityMap:!!o.specularIntensityMap,specularColorMap:!!o.specularColorMap,specularColorMapEncoding:M(o.specularColorMap),alphaMap:!!o.alphaMap,alphaTest:R,gradientMap:!!o.gradientMap,sheen:o.sheen>0,sheenColorMap:!!o.sheenColorMap,sheenColorMapEncoding:M(o.sheenColorMap),sheenRoughnessMap:!!o.sheenRoughnessMap,transmission:o.transmission>0,transmissionMap:!!o.transmissionMap,thicknessMap:!!o.thicknessMap,combine:o.combine,vertexTangents:!!o.normalMap&&!!S.geometry&&!!S.geometry.attributes.tangent,vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!S.geometry&&!!S.geometry.attributes.color&&4===S.geometry.attributes.color.itemSize,vertexUvs:!!o.map||!!o.bumpMap||!!o.normalMap||!!o.specularMap||!!o.alphaMap||!!o.emissiveMap||!!o.roughnessMap||!!o.metalnessMap||!!o.clearcoatMap||!!o.clearcoatRoughnessMap||!!o.clearcoatNormalMap||!!o.displacementMap||!!o.transmissionMap||!!o.thicknessMap||!!o.specularIntensityMap||!!o.specularColorMap||!!o.sheenColorMap||o.sheenRoughnessMap,uvsVertexOnly:!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatNormalMap||o.transmission>0||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||o.sheen>0||o.sheenColorMap||o.sheenRoughnessMap||!o.displacementMap),fog:!!T,useFog:o.fog,fogExp2:T&&T.isFogExp2,flatShading:!!o.flatShading,sizeAttenuation:o.sizeAttenuation,logarithmicDepthBuffer:c,skinning:!0===S.isSkinnedMesh&&E>0,maxBones:E,useVertexTexture:p,morphTargets:!!S.geometry&&!!S.geometry.morphAttributes.position,morphNormals:!!S.geometry&&!!S.geometry.morphAttributes.normal,morphTargetsCount:S.geometry&&S.geometry.morphAttributes.position?S.geometry.morphAttributes.position.length:0,numDirLights:l.directional.length,numPointLights:l.point.length,numSpotLights:l.spot.length,numRectAreaLights:l.rectArea.length,numHemiLights:l.hemi.length,numDirLightShadows:l.directionalShadowMap.length,numPointLightShadows:l.pointShadowMap.length,numSpotLightShadows:l.spotShadowMap.length,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,format:o.format,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&g.length>0,shadowMapType:e.shadowMap.type,toneMapping:o.toneMapped?e.toneMapping:r.uL9,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===r.ehD,flipSided:o.side===r._Li,depthPacking:void 0!==o.depthPacking&&o.depthPacking,index0AttributeName:o.index0AttributeName,extensionDerivatives:o.extensions&&o.extensions.derivatives,extensionFragDepth:o.extensions&&o.extensions.fragDepth,extensionDrawBuffers:o.extensions&&o.extensions.drawBuffers,extensionShaderTextureLOD:o.extensions&&o.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||n.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()}},getProgramCacheKey:function(t){const a=[];if(t.shaderID?a.push(t.shaderID):(a.push((0,y.Wu)(t.fragmentShader)),a.push((0,y.Wu)(t.vertexShader))),void 0!==t.defines)for(const e in t.defines)a.push(e),a.push(t.defines[e]);if(!1===t.isRawShaderMaterial){for(let e=0;e<g.length;e++)a.push(t[g[e]]);a.push(e.outputEncoding),a.push(e.gammaFactor)}return a.push(t.customProgramCacheKey),a.join()},getUniforms:function(e){const t=m[e.type];let a;if(t){const e=L.V[t];a=A.rD.clone(e.uniforms)}else a=e.uniforms;return a},acquireProgram:function(t,a){let r;for(let e=0,t=l.length;e<t;e++){const t=l[e];if(t.cacheKey===a){r=t,++r.usedTimes;break}}return void 0===r&&(r=new w(e,a,t,o),l.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){const t=l.indexOf(e);l[t]=l[l.length-1],l.pop(),e.destroy()}},programs:l}}},7905:(e,t,a)=>{function r(){let e=new WeakMap;return{get:function(t){let a=e.get(t);return void 0===a&&(a={},e.set(t,a)),a},remove:function(t){e.delete(t)},update:function(t,a,r){e.get(t)[a]=r},dispose:function(){e=new WeakMap}}}a.d(t,{Z:()=>r})},6423:(e,t,a)=>{function r(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function n(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function i(e){const t=[];let a=0;const i=[],o=[],s=[],l={id:-1};function u(r,n,i,o,s,u){let c=t[a];const p=e.get(i);return void 0===c?(c={id:r.id,object:r,geometry:n,material:i,program:p.program||l,groupOrder:o,renderOrder:r.renderOrder,z:s,group:u},t[a]=c):(c.id=r.id,c.object=r,c.geometry=n,c.material=i,c.program=p.program||l,c.groupOrder=o,c.renderOrder=r.renderOrder,c.z=s,c.group=u),a++,c}return{opaque:i,transmissive:o,transparent:s,init:function(){a=0,i.length=0,o.length=0,s.length=0},push:function(e,t,a,r,n,l){const c=u(e,t,a,r,n,l);a.transmission>0?o.push(c):!0===a.transparent?s.push(c):i.push(c)},unshift:function(e,t,a,r,n,l){const c=u(e,t,a,r,n,l);a.transmission>0?o.unshift(c):!0===a.transparent?s.unshift(c):i.unshift(c)},finish:function(){for(let e=a,r=t.length;e<r;e++){const a=t[e];if(null===a.id)break;a.id=null,a.object=null,a.geometry=null,a.material=null,a.program=null,a.group=null}},sort:function(e,t){i.length>1&&i.sort(e||r),o.length>1&&o.sort(t||n),s.length>1&&s.sort(t||n)}}}function o(e){let t=new WeakMap;return{get:function(a,r){let n;return!1===t.has(a)?(n=new i(e),t.set(a,[n])):r>=t.get(a).length?(n=new i(e),t.get(a).push(n)):n=t.get(a)[r],n},dispose:function(){t=new WeakMap}}}a.d(t,{M:()=>o})},9801:(e,t,a)=>{a.d(t,{Q:()=>f});var r=a(3662),n=a(9203),i=a(1138),o=a(6881),s=a(3935);function l(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let a;switch(t.type){case"DirectionalLight":a={direction:new o.P,color:new r.I};break;case"SpotLight":a={position:new o.P,direction:new o.P,color:new r.I,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":a={position:new o.P,color:new r.I,distance:0,decay:0};break;case"HemisphereLight":a={direction:new o.P,skyColor:new r.I,groundColor:new r.I};break;case"RectAreaLight":a={color:new r.I,position:new o.P,halfWidth:new o.P,halfHeight:new o.P}}return e[t.id]=a,a}}}let u=0;function c(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function p(e,t){const a=new l,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let a;switch(t.type){case"DirectionalLight":case"SpotLight":a={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new i.F};break;case"PointLight":a={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new i.F,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=a,a}}}(),p={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let e=0;e<9;e++)p.probe.push(new o.P);const d=new o.P,f=new n.y,h=new n.y;return{setup:function(n,i){let o=0,l=0,d=0;for(let e=0;e<9;e++)p.probe[e].set(0,0,0);let f=0,h=0,m=0,g=0,M=0,b=0,S=0,T=0;n.sort(c);const x=!0!==i?Math.PI:1;for(let e=0,t=n.length;e<t;e++){const t=n[e],i=t.color,s=t.intensity,u=t.distance,c=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)o+=i.r*s*x,l+=i.g*s*x,d+=i.b*s*x;else if(t.isLightProbe)for(let e=0;e<9;e++)p.probe[e].addScaledVector(t.sh.coefficients[e],s);else if(t.isDirectionalLight){const e=a.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*x),t.castShadow){const e=t.shadow,a=r.get(t);a.shadowBias=e.bias,a.shadowNormalBias=e.normalBias,a.shadowRadius=e.radius,a.shadowMapSize=e.mapSize,p.directionalShadow[f]=a,p.directionalShadowMap[f]=c,p.directionalShadowMatrix[f]=t.shadow.matrix,b++}p.directional[f]=e,f++}else if(t.isSpotLight){const e=a.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(i).multiplyScalar(s*x),e.distance=u,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,a=r.get(t);a.shadowBias=e.bias,a.shadowNormalBias=e.normalBias,a.shadowRadius=e.radius,a.shadowMapSize=e.mapSize,p.spotShadow[m]=a,p.spotShadowMap[m]=c,p.spotShadowMatrix[m]=t.shadow.matrix,T++}p.spot[m]=e,m++}else if(t.isRectAreaLight){const e=a.get(t);e.color.copy(i).multiplyScalar(s),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),p.rectArea[g]=e,g++}else if(t.isPointLight){const e=a.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*x),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,a=r.get(t);a.shadowBias=e.bias,a.shadowNormalBias=e.normalBias,a.shadowRadius=e.radius,a.shadowMapSize=e.mapSize,a.shadowCameraNear=e.camera.near,a.shadowCameraFar=e.camera.far,p.pointShadow[h]=a,p.pointShadowMap[h]=c,p.pointShadowMatrix[h]=t.shadow.matrix,S++}p.point[h]=e,h++}else if(t.isHemisphereLight){const e=a.get(t);e.skyColor.copy(t.color).multiplyScalar(s*x),e.groundColor.copy(t.groundColor).multiplyScalar(s*x),p.hemi[M]=e,M++}}g>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(p.rectAreaLTC1=s.r.LTC_FLOAT_1,p.rectAreaLTC2=s.r.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(p.rectAreaLTC1=s.r.LTC_HALF_1,p.rectAreaLTC2=s.r.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),p.ambient[0]=o,p.ambient[1]=l,p.ambient[2]=d;const v=p.hash;v.directionalLength===f&&v.pointLength===h&&v.spotLength===m&&v.rectAreaLength===g&&v.hemiLength===M&&v.numDirectionalShadows===b&&v.numPointShadows===S&&v.numSpotShadows===T||(p.directional.length=f,p.spot.length=m,p.rectArea.length=g,p.point.length=h,p.hemi.length=M,p.directionalShadow.length=b,p.directionalShadowMap.length=b,p.pointShadow.length=S,p.pointShadowMap.length=S,p.spotShadow.length=T,p.spotShadowMap.length=T,p.directionalShadowMatrix.length=b,p.pointShadowMatrix.length=S,p.spotShadowMatrix.length=T,v.directionalLength=f,v.pointLength=h,v.spotLength=m,v.rectAreaLength=g,v.hemiLength=M,v.numDirectionalShadows=b,v.numPointShadows=S,v.numSpotShadows=T,p.version=u++)},setupView:function(e,t){let a=0,r=0,n=0,i=0,o=0;const s=t.matrixWorldInverse;for(let t=0,l=e.length;t<l;t++){const l=e[t];if(l.isDirectionalLight){const e=p.directional[a];e.direction.setFromMatrixPosition(l.matrixWorld),d.setFromMatrixPosition(l.target.matrixWorld),e.direction.sub(d),e.direction.transformDirection(s),a++}else if(l.isSpotLight){const e=p.spot[n];e.position.setFromMatrixPosition(l.matrixWorld),e.position.applyMatrix4(s),e.direction.setFromMatrixPosition(l.matrixWorld),d.setFromMatrixPosition(l.target.matrixWorld),e.direction.sub(d),e.direction.transformDirection(s),n++}else if(l.isRectAreaLight){const e=p.rectArea[i];e.position.setFromMatrixPosition(l.matrixWorld),e.position.applyMatrix4(s),h.identity(),f.copy(l.matrixWorld),f.premultiply(s),h.extractRotation(f),e.halfWidth.set(.5*l.width,0,0),e.halfHeight.set(0,.5*l.height,0),e.halfWidth.applyMatrix4(h),e.halfHeight.applyMatrix4(h),i++}else if(l.isPointLight){const e=p.point[r];e.position.setFromMatrixPosition(l.matrixWorld),e.position.applyMatrix4(s),r++}else if(l.isHemisphereLight){const e=p.hemi[o];e.direction.setFromMatrixPosition(l.matrixWorld),e.direction.transformDirection(s),e.direction.normalize(),o++}}},state:p}}function d(e,t){const a=new p(e,t),r=[],n=[];return{init:function(){r.length=0,n.length=0},state:{lightsArray:r,shadowsArray:n,lights:a},setupLights:function(e){a.setup(r,e)},setupLightsView:function(e){a.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){n.push(e)}}}function f(e,t){let a=new WeakMap;return{get:function(r,n=0){let i;return!1===a.has(r)?(i=new d(e,t),a.set(r,[i])):n>=a.get(r).length?(i=new d(e,t),a.get(r).push(i)):i=a.get(r)[n],i},dispose:function(){a=new WeakMap}}}},5116:(e,t,a)=>{a.d(t,{c:()=>m});var r=a(1661),n=a(4302),i=a(2114),o=a(7683),s=a(1621),l=a(140),u=a(9046),c=a(6454),p=a(223),d=a(1138),f=a(4698),h=a(8557);function m(e,t,a){let m=new f.i;const g=new d.F,M=new d.F,b=new p.L,S=new i.l({depthPacking:r.mSO}),T=new o.L,x={},v=a.maxTextureSize,_={0:r._Li,1:r.Wl3,2:r.ehD},E=new s.j({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new d.F},radius:{value:4}},vertexShader:h.u,fragmentShader:h.D}),w=E.clone();w.defines.HORIZONTAL_PASS=1;const L=new u.u;L.setAttribute("position",new l.Tl(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new c.K(L,E),y=this;function R(a,r){const n=t.update(A);E.defines.VSM_SAMPLES!==a.blurSamples&&(E.defines.VSM_SAMPLES=a.blurSamples,w.defines.VSM_SAMPLES=a.blurSamples,E.needsUpdate=!0,w.needsUpdate=!0),E.uniforms.shadow_pass.value=a.map.texture,E.uniforms.resolution.value=a.mapSize,E.uniforms.radius.value=a.radius,e.setRenderTarget(a.mapPass),e.clear(),e.renderBufferDirect(r,null,n,E,A,null),w.uniforms.shadow_pass.value=a.mapPass.texture,w.uniforms.resolution.value=a.mapSize,w.uniforms.radius.value=a.radius,e.setRenderTarget(a.map),e.clear(),e.renderBufferDirect(r,null,n,w,A,null)}function P(t,a,n,i,o,s,l){let u=null;const c=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(u=void 0!==c?c:!0===i.isPointLight?T:S,e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){const e=u.uuid,t=n.uuid;let a=x[e];void 0===a&&(a={},x[e]=a);let r=a[t];void 0===r&&(r=u.clone(),a[t]=r),u=r}return u.visible=n.visible,u.wireframe=n.wireframe,l===r.dwk?u.side=null!==n.shadowSide?n.shadowSide:n.side:u.side=null!==n.shadowSide?n.shadowSide:_[n.side],u.alphaMap=n.alphaMap,u.alphaTest=n.alphaTest,u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.displacementMap=n.displacementMap,u.displacementScale=n.displacementScale,u.displacementBias=n.displacementBias,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,!0===i.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(i.matrixWorld),u.nearDistance=o,u.farDistance=s),u}function C(a,n,i,o,s){if(!1===a.visible)return;if(a.layers.test(n.layers)&&(a.isMesh||a.isLine||a.isPoints)&&(a.castShadow||a.receiveShadow&&s===r.dwk)&&(!a.frustumCulled||m.intersectsObject(a))){a.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,a.matrixWorld);const r=t.update(a),n=a.material;if(Array.isArray(n)){const t=r.groups;for(let l=0,u=t.length;l<u;l++){const u=t[l],c=n[u.materialIndex];if(c&&c.visible){const t=P(a,0,c,o,i.near,i.far,s);e.renderBufferDirect(i,null,r,t,a,u)}}}else if(n.visible){const t=P(a,0,n,o,i.near,i.far,s);e.renderBufferDirect(i,null,r,t,a,null)}}const l=a.children;for(let e=0,t=l.length;e<t;e++)C(l[e],n,i,o,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=r._iA,this.render=function(t,a,i){if(!1===y.enabled)return;if(!1===y.autoUpdate&&!1===y.needsUpdate)return;if(0===t.length)return;const o=e.getRenderTarget(),s=e.getActiveCubeFace(),l=e.getActiveMipmapLevel(),u=e.state;u.setBlending(r.jFi),u.buffers.color.setClear(1,1,1,1),u.buffers.depth.setTest(!0),u.setScissorTest(!1);for(let o=0,s=t.length;o<s;o++){const s=t[o],l=s.shadow;if(void 0===l){console.warn("THREE.WebGLShadowMap:",s,"has no shadow.");continue}if(!1===l.autoUpdate&&!1===l.needsUpdate)continue;g.copy(l.mapSize);const c=l.getFrameExtents();if(g.multiply(c),M.copy(l.mapSize),(g.x>v||g.y>v)&&(g.x>v&&(M.x=Math.floor(v/c.x),g.x=M.x*c.x,l.mapSize.x=M.x),g.y>v&&(M.y=Math.floor(v/c.y),g.y=M.y*c.y,l.mapSize.y=M.y)),null===l.map&&!l.isPointLightShadow&&this.type===r.dwk){const e={minFilter:r.wem,magFilter:r.wem,format:r.wk1};l.map=new n.d(g.x,g.y,e),l.map.texture.name=s.name+".shadowMap",l.mapPass=new n.d(g.x,g.y,e),l.camera.updateProjectionMatrix()}if(null===l.map){const e={minFilter:r.TyD,magFilter:r.TyD,format:r.wk1};l.map=new n.d(g.x,g.y,e),l.map.texture.name=s.name+".shadowMap",l.camera.updateProjectionMatrix()}e.setRenderTarget(l.map),e.clear();const p=l.getViewportCount();for(let e=0;e<p;e++){const t=l.getViewport(e);b.set(M.x*t.x,M.y*t.y,M.x*t.z,M.y*t.w),u.viewport(b),l.updateMatrices(s,e),m=l.getFrustum(),C(a,i,l.camera,s,this.type)}l.isPointLightShadow||this.type!==r.dwk||R(l,i),l.needsUpdate=!1}y.needsUpdate=!1,e.setRenderTarget(o,s,l)}}},181:(e,t,a)=>{a.d(t,{m:()=>i});var r=a(1661),n=a(223);function i(e,t,a){const i=a.isWebGL2;const o=new function(){let t=!1;const a=new n.L;let r=null;const i=new n.L(0,0,0,0);return{setMask:function(a){r===a||t||(e.colorMask(a,a,a,a),r=a)},setLocked:function(e){t=e},setClear:function(t,r,n,o,s){!0===s&&(t*=o,r*=o,n*=o),a.set(t,r,n,o),!1===i.equals(a)&&(e.clearColor(t,r,n,o),i.copy(a))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},s=new function(){let t=!1,a=null,n=null,i=null;return{setTest:function(e){e?G(2929):W(2929)},setMask:function(r){a===r||t||(e.depthMask(r),a=r)},setFunc:function(t){if(n!==t){if(t)switch(t){case r.BVF:e.depthFunc(512);break;case r.Se2:e.depthFunc(519);break;case r.Zr5:e.depthFunc(513);break;case r.vCF:e.depthFunc(515);break;case r.eD:e.depthFunc(514);break;case r.ksN:e.depthFunc(518);break;case r.w$m:e.depthFunc(516);break;case r.M6v:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);n=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,a=null,n=null,i=null}}},l=new function(){let t=!1,a=null,r=null,n=null,i=null,o=null,s=null,l=null,u=null;return{setTest:function(e){t||(e?G(2960):W(2960))},setMask:function(r){a===r||t||(e.stencilMask(r),a=r)},setFunc:function(t,a,o){r===t&&n===a&&i===o||(e.stencilFunc(t,a,o),r=t,n=a,i=o)},setOp:function(t,a,r){o===t&&s===a&&l===r||(e.stencilOp(t,a,r),o=t,s=a,l=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,a=null,r=null,n=null,i=null,o=null,s=null,l=null,u=null}}};let u={},c={},p=null,d=!1,f=null,h=null,m=null,g=null,M=null,b=null,S=null,T=!1,x=null,v=null,_=null,E=null,w=null;const L=e.getParameter(35661);let A=!1,y=0;const R=e.getParameter(7938);-1!==R.indexOf("WebGL")?(y=parseFloat(/^WebGL (\d)/.exec(R)[1]),A=y>=1):-1!==R.indexOf("OpenGL ES")&&(y=parseFloat(/^OpenGL ES (\d)/.exec(R)[1]),A=y>=2);let P=null,C={};const D=e.getParameter(3088),F=e.getParameter(2978),I=(new n.L).fromArray(D),U=(new n.L).fromArray(F);function N(t,a,r){const n=new Uint8Array(4),i=e.createTexture();e.bindTexture(t,i),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let t=0;t<r;t++)e.texImage2D(a+t,0,6408,1,1,0,6408,5121,n);return i}const O={};function G(t){!0!==u[t]&&(e.enable(t),u[t]=!0)}function W(t){!1!==u[t]&&(e.disable(t),u[t]=!1)}O[3553]=N(3553,3553,1),O[34067]=N(34067,34069,6),o.setClear(0,0,0,1),s.setClear(1),l.setClear(0),G(2929),s.setFunc(r.vCF),V(!1),z(r.tm_),G(2884),H(r.jFi);const B={[r.bGH]:32774,[r.Wbm]:32778,[r.rOj]:32779};if(i)B[r.r_]=32775,B[r.Sm8]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(B[r.r_]=e.MIN_EXT,B[r.Sm8]=e.MAX_EXT)}const k={[r.c8b]:0,[r.ghN]:1,[r.KhW]:768,[r.k74]:770,[r.RlZ]:776,[r.Vdb]:774,[r.fSK]:772,[r.iWC]:769,[r.LgZ]:771,[r.Wpd]:775,[r.Hy8]:773};function H(t,a,n,i,o,s,l,u){if(t!==r.jFi){if(!1===d&&(G(3042),d=!0),t===r.Xaj)o=o||a,s=s||n,l=l||i,a===h&&o===M||(e.blendEquationSeparate(B[a],B[o]),h=a,M=o),n===m&&i===g&&s===b&&l===S||(e.blendFuncSeparate(k[n],k[i],k[s],k[l]),m=n,g=i,b=s,S=l),f=t,T=null;else if(t!==f||u!==T){if(h===r.bGH&&M===r.bGH||(e.blendEquation(32774),h=r.bGH,M=r.bGH),u)switch(t){case r.bdR:e.blendFuncSeparate(1,771,1,771);break;case r.WMw:e.blendFunc(1,1);break;case r.N4l:e.blendFuncSeparate(0,0,769,771);break;case r.M5h:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case r.bdR:e.blendFuncSeparate(770,771,1,771);break;case r.WMw:e.blendFunc(770,1);break;case r.N4l:e.blendFunc(0,769);break;case r.M5h:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}m=null,g=null,b=null,S=null,f=t,T=u}}else!0===d&&(W(3042),d=!1)}function V(t){x!==t&&(t?e.frontFace(2304):e.frontFace(2305),x=t)}function z(t){t!==r.PeU?(G(2884),t!==v&&(t===r.tm_?e.cullFace(1029):t===r.S2y?e.cullFace(1028):e.cullFace(1032))):W(2884),v=t}function X(t,a,r){t?(G(32823),E===a&&w===r||(e.polygonOffset(a,r),E=a,w=r)):W(32823)}function j(t){void 0===t&&(t=33984+L-1),P!==t&&(e.activeTexture(t),P=t)}return{buffers:{color:o,depth:s,stencil:l},enable:G,disable:W,bindFramebuffer:function(t,a){return c[t]!==a&&(e.bindFramebuffer(t,a),c[t]=a,i&&(36009===t&&(c[36160]=a),36160===t&&(c[36009]=a)),!0)},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:H,setMaterial:function(e,t){e.side===r.ehD?W(2884):G(2884);let a=e.side===r._Li;t&&(a=!a),V(a),e.blending===r.bdR&&!1===e.transparent?H(r.jFi):H(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),o.setMask(e.colorWrite);const n=e.stencilWrite;l.setTest(n),n&&(l.setMask(e.stencilWriteMask),l.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),l.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),X(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?G(32926):W(32926)},setFlipSided:V,setCullFace:z,setLineWidth:function(t){t!==_&&(A&&e.lineWidth(t),_=t)},setPolygonOffset:X,setScissorTest:function(e){e?G(3089):W(3089)},activeTexture:j,bindTexture:function(t,a){null===P&&j();let r=C[P];void 0===r&&(r={type:void 0,texture:void 0},C[P]=r),r.type===t&&r.texture===a||(e.bindTexture(t,a||O[t]),r.type=t,r.texture=a)},unbindTexture:function(){const t=C[P];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===I.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),I.copy(t))},viewport:function(t){!1===U.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),U.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===i&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),u={},P=null,C={},c={},p=null,d=!1,f=null,h=null,m=null,g=null,M=null,b=null,S=null,T=!1,x=null,v=null,_=null,E=null,w=null,I.set(0,0,e.canvas.width,e.canvas.height),U.set(0,0,e.canvas.width,e.canvas.height),o.reset(),s.reset(),l.reset()}}}},1643:(e,t,a)=>{a.d(t,{w:()=>o});var r=a(1661),n=a(2043),i=a(392);function o(e,t,a,o,s,l,u){const c=s.isWebGL2,p=s.maxTextures,d=s.maxCubemapSize,f=s.maxTextureSize,h=s.maxSamples,m=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):void 0,g=new WeakMap;let M,b=!1;try{b="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function S(e,t){return b?new OffscreenCanvas(e,t):(0,i.c)("canvas")}function T(e,t,a,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?n.gy:Math.floor,o=r(i*e.width),s=r(i*e.height);void 0===M&&(M=S(o,s));const l=a?S(o,s):M;l.width=o,l.height=s;return l.getContext("2d").drawImage(e,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+")."),l}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function x(e){return n.wt(e.width)&&n.wt(e.height)}function v(e,t){return e.generateMipmaps&&t&&e.minFilter!==r.TyD&&e.minFilter!==r.wem}function _(t){e.generateMipmap(t)}function E(a,r,n){if(!1===c)return r;if(null!==a){if(void 0!==e[a])return e[a];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+a+"'")}let i=r;return 6403===r&&(5126===n&&(i=33326),5131===n&&(i=33325),5121===n&&(i=33321)),6407===r&&(5126===n&&(i=34837),5131===n&&(i=34843),5121===n&&(i=32849)),6408===r&&(5126===n&&(i=34836),5131===n&&(i=34842),5121===n&&(i=32856)),33325!==i&&33326!==i&&34842!==i&&34836!==i||t.get("EXT_color_buffer_float"),i}function w(e){return e===r.TyD||e===r.YLQ||e===r.aH4?9728:9729}function L(t){const a=t.target;a.removeEventListener("dispose",L),function(t){const a=o.get(t);if(void 0===a.__webglInit)return;e.deleteTexture(a.__webglTexture),o.remove(t)}(a),a.isVideoTexture&&g.delete(a),u.memory.textures--}function A(t){const a=t.target;a.removeEventListener("dispose",A),function(t){const a=t.texture,r=o.get(t),n=o.get(a);if(!t)return;void 0!==n.__webglTexture&&(e.deleteTexture(n.__webglTexture),u.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(r.__webglFramebuffer[t]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[t]);else e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&e.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer&&e.deleteRenderbuffer(r.__webglColorRenderbuffer),r.__webglDepthRenderbuffer&&e.deleteRenderbuffer(r.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(let t=0,r=a.length;t<r;t++){const r=o.get(a[t]);r.__webglTexture&&(e.deleteTexture(r.__webglTexture),u.memory.textures--),o.remove(a[t])}o.remove(a),o.remove(t)}(a)}let y=0;function R(e,t){const r=o.get(e);if(e.isVideoTexture&&function(e){const t=u.render.frame;g.get(e)!==t&&(g.set(e,t),e.update())}(e),e.version>0&&r.__version!==e.version){const a=e.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void U(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}a.activeTexture(33984+t),a.bindTexture(3553,r.__webglTexture)}function P(t,n){const i=o.get(t);t.version>0&&i.__version!==t.version?function(t,n,i){if(6!==n.image.length)return;I(t,n),a.activeTexture(33984+i),a.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,n.flipY),e.pixelStorei(37441,n.premultiplyAlpha),e.pixelStorei(3317,n.unpackAlignment),e.pixelStorei(37443,0);const o=n&&(n.isCompressedTexture||n.image[0].isCompressedTexture),s=n.image[0]&&n.image[0].isDataTexture,u=[];for(let e=0;e<6;e++)u[e]=o||s?s?n.image[e].image:n.image[e]:T(n.image[e],!1,!0,d);const p=x(u[0])||c,f=l.convert(n.format),h=l.convert(n.type),m=E(n.internalFormat,f,h,n.encoding);let g;if(F(34067,n,p),o)for(let e=0;e<6;e++){g=u[e].mipmaps;for(let t=0;t<g.length;t++){const i=g[t];n.format!==r.wk1&&n.format!==r.UCm?null!==f?a.compressedTexImage2D(34069+e,t,m,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):a.texImage2D(34069+e,t,m,i.width,i.height,0,f,h,i.data)}}else{g=n.mipmaps;for(let e=0;e<6;e++)if(s){a.texImage2D(34069+e,0,m,u[e].width,u[e].height,0,f,h,u[e].data);for(let t=0;t<g.length;t++){const r=g[t].image[e].image;a.texImage2D(34069+e,t+1,m,r.width,r.height,0,f,h,r.data)}}else{a.texImage2D(34069+e,0,m,f,h,u[e]);for(let t=0;t<g.length;t++){const r=g[t];a.texImage2D(34069+e,t+1,m,f,h,r.image[e])}}}v(n,p)&&_(34067);t.__version=n.version,n.onUpdate&&n.onUpdate(n)}(i,t,n):(a.activeTexture(33984+n),a.bindTexture(34067,i.__webglTexture))}const C={[r.rpg]:10497,[r.uWy]:33071,[r.OoA]:33648},D={[r.TyD]:9728,[r.YLQ]:9984,[r.aH4]:9986,[r.wem]:9729,[r.qyh]:9985,[r.D1R]:9987};function F(a,n,i){if(i?(e.texParameteri(a,10242,C[n.wrapS]),e.texParameteri(a,10243,C[n.wrapT]),32879!==a&&35866!==a||e.texParameteri(a,32882,C[n.wrapR]),e.texParameteri(a,10240,D[n.magFilter]),e.texParameteri(a,10241,D[n.minFilter])):(e.texParameteri(a,10242,33071),e.texParameteri(a,10243,33071),32879!==a&&35866!==a||e.texParameteri(a,32882,33071),n.wrapS===r.uWy&&n.wrapT===r.uWy||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(a,10240,w(n.magFilter)),e.texParameteri(a,10241,w(n.minFilter)),n.minFilter!==r.TyD&&n.minFilter!==r.wem&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const i=t.get("EXT_texture_filter_anisotropic");if(n.type===r.VzW&&!1===t.has("OES_texture_float_linear"))return;if(!1===c&&n.type===r.cLu&&!1===t.has("OES_texture_half_float_linear"))return;(n.anisotropy>1||o.get(n).__currentAnisotropy)&&(e.texParameterf(a,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(n.anisotropy,s.getMaxAnisotropy())),o.get(n).__currentAnisotropy=n.anisotropy)}}function I(t,a){void 0===t.__webglInit&&(t.__webglInit=!0,a.addEventListener("dispose",L),t.__webglTexture=e.createTexture(),u.memory.textures++)}function U(t,n,i){let o=3553;n.isDataTexture2DArray&&(o=35866),n.isDataTexture3D&&(o=32879),I(t,n),a.activeTexture(33984+i),a.bindTexture(o,t.__webglTexture),e.pixelStorei(37440,n.flipY),e.pixelStorei(37441,n.premultiplyAlpha),e.pixelStorei(3317,n.unpackAlignment),e.pixelStorei(37443,0);const s=function(e){return!c&&(e.wrapS!==r.uWy||e.wrapT!==r.uWy||e.minFilter!==r.TyD&&e.minFilter!==r.wem)}(n)&&!1===x(n.image),u=T(n.image,s,!1,f),p=x(u)||c,d=l.convert(n.format);let h,m=l.convert(n.type),g=E(n.internalFormat,d,m,n.encoding);F(o,n,p);const M=n.mipmaps;if(n.isDepthTexture)g=6402,c?g=n.type===r.VzW?36012:n.type===r.JQ4?33190:n.type===r.wJv?35056:33189:n.type===r.VzW&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),n.format===r.qkB&&6402===g&&n.type!==r.LsT&&n.type!==r.JQ4&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=r.LsT,m=l.convert(n.type)),n.format===r.brP&&6402===g&&(g=34041,n.type!==r.wJv&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=r.wJv,m=l.convert(n.type))),a.texImage2D(3553,0,g,u.width,u.height,0,d,m,null);else if(n.isDataTexture)if(M.length>0&&p){for(let e=0,t=M.length;e<t;e++)h=M[e],a.texImage2D(3553,e,g,h.width,h.height,0,d,m,h.data);n.generateMipmaps=!1}else a.texImage2D(3553,0,g,u.width,u.height,0,d,m,u.data);else if(n.isCompressedTexture)for(let e=0,t=M.length;e<t;e++)h=M[e],n.format!==r.wk1&&n.format!==r.UCm?null!==d?a.compressedTexImage2D(3553,e,g,h.width,h.height,0,h.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):a.texImage2D(3553,e,g,h.width,h.height,0,d,m,h.data);else if(n.isDataTexture2DArray)a.texImage3D(35866,0,g,u.width,u.height,u.depth,0,d,m,u.data);else if(n.isDataTexture3D)a.texImage3D(32879,0,g,u.width,u.height,u.depth,0,d,m,u.data);else{const e=function(e,t,a){return!0===v(e,a)?Math.log2(Math.max(t.width,t.height))+1:e.mipmaps.length>0?e.mipmaps.length:1}(n,u,p),r=c&&!0!==n.isVideoTexture,i=void 0===t.__version;if(M.length>0&&p){r&&i&&a.texStorage2D(3553,e,g,M[0].width,M[0].height);for(let e=0,t=M.length;e<t;e++)h=M[e],r?a.texSubImage2D(3553,e,0,0,d,m,h):a.texImage2D(3553,e,g,d,m,h);n.generateMipmaps=!1}else r?(i&&a.texStorage2D(3553,e,g,u.width,u.height),a.texSubImage2D(3553,0,0,0,d,m,u)):a.texImage2D(3553,0,g,d,m,u)}v(n,p)&&_(o),t.__version=n.version,n.onUpdate&&n.onUpdate(n)}function N(t,r,n,i,s){const u=l.convert(n.format),c=l.convert(n.type),p=E(n.internalFormat,u,c,n.encoding);o.get(r).__hasExternalTextures||(32879===s||35866===s?a.texImage3D(s,0,p,r.width,r.height,r.depth,0,u,c,null):a.texImage2D(s,0,p,r.width,r.height,0,u,c,null)),a.bindFramebuffer(36160,t),r.useRenderToTexture?m.framebufferTexture2DMultisampleEXT(36160,i,s,o.get(n).__webglTexture,0,W(r)):e.framebufferTexture2D(36160,i,s,o.get(n).__webglTexture,0),a.bindFramebuffer(36160,null)}function O(t,a,n){if(e.bindRenderbuffer(36161,t),a.depthBuffer&&!a.stencilBuffer){let i=33189;if(n||a.useRenderToTexture){const t=a.depthTexture;t&&t.isDepthTexture&&(t.type===r.VzW?i=36012:t.type===r.JQ4&&(i=33190));const n=W(a);a.useRenderToTexture?m.renderbufferStorageMultisampleEXT(36161,n,i,a.width,a.height):e.renderbufferStorageMultisample(36161,n,i,a.width,a.height)}else e.renderbufferStorage(36161,i,a.width,a.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(a.depthBuffer&&a.stencilBuffer){const r=W(a);n&&a.useRenderbuffer?e.renderbufferStorageMultisample(36161,r,35056,a.width,a.height):a.useRenderToTexture?m.renderbufferStorageMultisampleEXT(36161,r,35056,a.width,a.height):e.renderbufferStorage(36161,34041,a.width,a.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=!0===a.isWebGLMultipleRenderTargets?a.texture[0]:a.texture,r=l.convert(t.format),i=l.convert(t.type),o=E(t.internalFormat,r,i,t.encoding),s=W(a);n&&a.useRenderbuffer?e.renderbufferStorageMultisample(36161,s,o,a.width,a.height):a.useRenderToTexture?m.renderbufferStorageMultisampleEXT(36161,s,o,a.width,a.height):e.renderbufferStorage(36161,o,a.width,a.height)}e.bindRenderbuffer(36161,null)}function G(t){const n=o.get(t),i=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!n.__autoAllocateDepthBuffer){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(a.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");o.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),R(n.depthTexture,0);const i=o.get(n.depthTexture).__webglTexture,s=W(n);if(n.depthTexture.format===r.qkB)n.useRenderToTexture?m.framebufferTexture2DMultisampleEXT(36160,36096,3553,i,0,s):e.framebufferTexture2D(36160,36096,3553,i,0);else{if(n.depthTexture.format!==r.brP)throw new Error("Unknown depthTexture format");n.useRenderToTexture?m.framebufferTexture2DMultisampleEXT(36160,33306,3553,i,0,s):e.framebufferTexture2D(36160,33306,3553,i,0)}}(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(let r=0;r<6;r++)a.bindFramebuffer(36160,n.__webglFramebuffer[r]),n.__webglDepthbuffer[r]=e.createRenderbuffer(),O(n.__webglDepthbuffer[r],t,!1)}else a.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),O(n.__webglDepthbuffer,t,!1);a.bindFramebuffer(36160,null)}function W(e){return c&&(e.useRenderbuffer||e.useRenderToTexture)?Math.min(h,e.samples):0}let B=!1,k=!1;this.allocateTextureUnit=function(){const e=y;return e>=p&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+p),y+=1,e},this.resetTextureUnits=function(){y=0},this.setTexture2D=R,this.setTexture2DArray=function(e,t){const r=o.get(e);e.version>0&&r.__version!==e.version?U(r,e,t):(a.activeTexture(33984+t),a.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(e,t){const r=o.get(e);e.version>0&&r.__version!==e.version?U(r,e,t):(a.activeTexture(33984+t),a.bindTexture(32879,r.__webglTexture))},this.setTextureCube=P,this.rebindTextures=function(e,t,a){const r=o.get(e);void 0!==t&&N(r.__webglFramebuffer,e,e.texture,36064,3553),void 0!==a&&G(e)},this.setupRenderTarget=function(t){const n=t.texture,i=o.get(t),p=o.get(n);t.addEventListener("dispose",A),!0!==t.isWebGLMultipleRenderTargets&&(void 0===p.__webglTexture&&(p.__webglTexture=e.createTexture()),p.__version=n.version,u.memory.textures++);const d=!0===t.isWebGLCubeRenderTarget,f=!0===t.isWebGLMultipleRenderTargets,h=n.isDataTexture3D||n.isDataTexture2DArray,m=x(t)||c;if(!c||n.format!==r.UCm||n.type!==r.VzW&&n.type!==r.cLu||(n.format=r.wk1,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),d){i.__webglFramebuffer=[];for(let t=0;t<6;t++)i.__webglFramebuffer[t]=e.createFramebuffer()}else if(i.__webglFramebuffer=e.createFramebuffer(),f)if(s.drawBuffers){const a=t.texture;for(let t=0,r=a.length;t<r;t++){const r=o.get(a[t]);void 0===r.__webglTexture&&(r.__webglTexture=e.createTexture(),u.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(t.useRenderbuffer)if(c){i.__webglMultisampledFramebuffer=e.createFramebuffer(),i.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,i.__webglColorRenderbuffer);const r=l.convert(n.format),o=l.convert(n.type),s=E(n.internalFormat,r,o,n.encoding),u=W(t);e.renderbufferStorageMultisample(36161,u,s,t.width,t.height),a.bindFramebuffer(36160,i.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,i.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(i.__webglDepthRenderbuffer=e.createRenderbuffer(),O(i.__webglDepthRenderbuffer,t,!0)),a.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(d){a.bindTexture(34067,p.__webglTexture),F(34067,n,m);for(let e=0;e<6;e++)N(i.__webglFramebuffer[e],t,n,36064,34069+e);v(n,m)&&_(34067),a.unbindTexture()}else if(f){const e=t.texture;for(let r=0,n=e.length;r<n;r++){const n=e[r],s=o.get(n);a.bindTexture(3553,s.__webglTexture),F(3553,n,m),N(i.__webglFramebuffer,t,n,36064+r,3553),v(n,m)&&_(3553)}a.unbindTexture()}else{let e=3553;if(h)if(c){e=n.isDataTexture3D?32879:35866}else console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");a.bindTexture(e,p.__webglTexture),F(e,n,m),N(i.__webglFramebuffer,t,n,36064,e),v(n,m)&&_(e),a.unbindTexture()}t.depthBuffer&&G(t)},this.updateRenderTargetMipmap=function(e){const t=x(e)||c,r=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let n=0,i=r.length;n<i;n++){const i=r[n];if(v(i,t)){const t=e.isWebGLCubeRenderTarget?34067:3553,r=o.get(i).__webglTexture;a.bindTexture(t,r),_(t),a.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.useRenderbuffer)if(c){const r=t.width,n=t.height;let i=16384;const s=[36064],l=t.stencilBuffer?33306:36096;t.depthBuffer&&s.push(l),t.ignoreDepthForMultisampleCopy||(t.depthBuffer&&(i|=256),t.stencilBuffer&&(i|=1024));const u=o.get(t);a.bindFramebuffer(36008,u.__webglMultisampledFramebuffer),a.bindFramebuffer(36009,u.__webglFramebuffer),t.ignoreDepthForMultisampleCopy&&(e.invalidateFramebuffer(36008,[l]),e.invalidateFramebuffer(36009,[l])),e.blitFramebuffer(0,0,r,n,0,0,r,n,i,9728),e.invalidateFramebuffer(36008,s),a.bindFramebuffer(36008,null),a.bindFramebuffer(36009,u.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.setupDepthRenderbuffer=G,this.setupFrameBufferTexture=N,this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===B&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),B=!0),e=e.texture),R(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===k&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),k=!0),e=e.texture),P(e,t)}}},1895:(e,t,a)=>{a.d(t,{y:()=>ce});var r=a(3882),n=a(4467),i=a(5491),o=a(7962);const s=new n.x,l=new i.C,u=new o.z,c=new r.B,p=[],d=[],f=new Float32Array(16),h=new Float32Array(9),m=new Float32Array(4);function g(e,t,a){const r=e[0];if(r<=0||r>0)return e;const n=t*a;let i=p[n];if(void 0===i&&(i=new Float32Array(n),p[n]=i),0!==t){r.toArray(i,0);for(let r=1,n=0;r!==t;++r)n+=a,e[r].toArray(i,n)}return i}function M(e,t){if(e.length!==t.length)return!1;for(let a=0,r=e.length;a<r;a++)if(e[a]!==t[a])return!1;return!0}function b(e,t){for(let a=0,r=t.length;a<r;a++)e[a]=t[a]}function S(e,t){let a=d[t];void 0===a&&(a=new Int32Array(t),d[t]=a);for(let r=0;r!==t;++r)a[r]=e.allocateTextureUnit();return a}function T(e,t){const a=this.cache;a[0]!==t&&(e.uniform1f(this.addr,t),a[0]=t)}function x(e,t){const a=this.cache;if(void 0!==t.x)a[0]===t.x&&a[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),a[0]=t.x,a[1]=t.y);else{if(M(a,t))return;e.uniform2fv(this.addr,t),b(a,t)}}function v(e,t){const a=this.cache;if(void 0!==t.x)a[0]===t.x&&a[1]===t.y&&a[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),a[0]=t.x,a[1]=t.y,a[2]=t.z);else if(void 0!==t.r)a[0]===t.r&&a[1]===t.g&&a[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),a[0]=t.r,a[1]=t.g,a[2]=t.b);else{if(M(a,t))return;e.uniform3fv(this.addr,t),b(a,t)}}function _(e,t){const a=this.cache;if(void 0!==t.x)a[0]===t.x&&a[1]===t.y&&a[2]===t.z&&a[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),a[0]=t.x,a[1]=t.y,a[2]=t.z,a[3]=t.w);else{if(M(a,t))return;e.uniform4fv(this.addr,t),b(a,t)}}function E(e,t){const a=this.cache,r=t.elements;if(void 0===r){if(M(a,t))return;e.uniformMatrix2fv(this.addr,!1,t),b(a,t)}else{if(M(a,r))return;m.set(r),e.uniformMatrix2fv(this.addr,!1,m),b(a,r)}}function w(e,t){const a=this.cache,r=t.elements;if(void 0===r){if(M(a,t))return;e.uniformMatrix3fv(this.addr,!1,t),b(a,t)}else{if(M(a,r))return;h.set(r),e.uniformMatrix3fv(this.addr,!1,h),b(a,r)}}function L(e,t){const a=this.cache,r=t.elements;if(void 0===r){if(M(a,t))return;e.uniformMatrix4fv(this.addr,!1,t),b(a,t)}else{if(M(a,r))return;f.set(r),e.uniformMatrix4fv(this.addr,!1,f),b(a,r)}}function A(e,t){const a=this.cache;a[0]!==t&&(e.uniform1i(this.addr,t),a[0]=t)}function y(e,t){const a=this.cache;M(a,t)||(e.uniform2iv(this.addr,t),b(a,t))}function R(e,t){const a=this.cache;M(a,t)||(e.uniform3iv(this.addr,t),b(a,t))}function P(e,t){const a=this.cache;M(a,t)||(e.uniform4iv(this.addr,t),b(a,t))}function C(e,t){const a=this.cache;a[0]!==t&&(e.uniform1ui(this.addr,t),a[0]=t)}function D(e,t){const a=this.cache;M(a,t)||(e.uniform2uiv(this.addr,t),b(a,t))}function F(e,t){const a=this.cache;M(a,t)||(e.uniform3uiv(this.addr,t),b(a,t))}function I(e,t){const a=this.cache;M(a,t)||(e.uniform4uiv(this.addr,t),b(a,t))}function U(e,t,a){const r=this.cache,n=a.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),a.safeSetTexture2D(t||s,n)}function N(e,t,a){const r=this.cache,n=a.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),a.setTexture3D(t||u,n)}function O(e,t,a){const r=this.cache,n=a.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),a.safeSetTextureCube(t||c,n)}function G(e,t,a){const r=this.cache,n=a.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),a.setTexture2DArray(t||l,n)}function W(e,t){e.uniform1fv(this.addr,t)}function B(e,t){const a=g(t,this.size,2);e.uniform2fv(this.addr,a)}function k(e,t){const a=g(t,this.size,3);e.uniform3fv(this.addr,a)}function H(e,t){const a=g(t,this.size,4);e.uniform4fv(this.addr,a)}function V(e,t){const a=g(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,a)}function z(e,t){const a=g(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,a)}function X(e,t){const a=g(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,a)}function j(e,t){e.uniform1iv(this.addr,t)}function Y(e,t){e.uniform2iv(this.addr,t)}function q(e,t){e.uniform3iv(this.addr,t)}function K(e,t){e.uniform4iv(this.addr,t)}function J(e,t){e.uniform1uiv(this.addr,t)}function Q(e,t){e.uniform2uiv(this.addr,t)}function Z(e,t){e.uniform3uiv(this.addr,t)}function $(e,t){e.uniform4uiv(this.addr,t)}function ee(e,t,a){const r=t.length,n=S(a,r);e.uniform1iv(this.addr,n);for(let e=0;e!==r;++e)a.safeSetTexture2D(t[e]||s,n[e])}function te(e,t,a){const r=t.length,n=S(a,r);e.uniform1iv(this.addr,n);for(let e=0;e!==r;++e)a.setTexture3D(t[e]||u,n[e])}function ae(e,t,a){const r=t.length,n=S(a,r);e.uniform1iv(this.addr,n);for(let e=0;e!==r;++e)a.safeSetTextureCube(t[e]||c,n[e])}function re(e,t,a){const r=t.length,n=S(a,r);e.uniform1iv(this.addr,n);for(let e=0;e!==r;++e)a.setTexture2DArray(t[e]||l,n[e])}function ne(e,t,a){this.id=e,this.addr=a,this.cache=[],this.setValue=function(e){switch(e){case 5126:return T;case 35664:return x;case 35665:return v;case 35666:return _;case 35674:return E;case 35675:return w;case 35676:return L;case 5124:case 35670:return A;case 35667:case 35671:return y;case 35668:case 35672:return R;case 35669:case 35673:return P;case 5125:return C;case 36294:return D;case 36295:return F;case 36296:return I;case 35678:case 36198:case 36298:case 36306:case 35682:return U;case 35679:case 36299:case 36307:return N;case 35680:case 36300:case 36308:case 36293:return O;case 36289:case 36303:case 36311:case 36292:return G}}(t.type)}function ie(e,t,a){this.id=e,this.addr=a,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return W;case 35664:return B;case 35665:return k;case 35666:return H;case 35674:return V;case 35675:return z;case 35676:return X;case 5124:case 35670:return j;case 35667:case 35671:return Y;case 35668:case 35672:return q;case 35669:case 35673:return K;case 5125:return J;case 36294:return Q;case 36295:return Z;case 36296:return $;case 35678:case 36198:case 36298:case 36306:case 35682:return ee;case 35679:case 36299:case 36307:return te;case 35680:case 36300:case 36308:case 36293:return ae;case 36289:case 36303:case 36311:case 36292:return re}}(t.type)}function oe(e){this.id=e,this.seq=[],this.map={}}ie.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),b(t,e)},oe.prototype.setValue=function(e,t,a){const r=this.seq;for(let n=0,i=r.length;n!==i;++n){const i=r[n];i.setValue(e,t[i.id],a)}};const se=/(\w+)(\])?(\[|\.)?/g;function le(e,t){e.seq.push(t),e.map[t.id]=t}function ue(e,t,a){const r=e.name,n=r.length;for(se.lastIndex=0;;){const i=se.exec(r),o=se.lastIndex;let s=i[1];const l="]"===i[2],u=i[3];if(l&&(s|=0),void 0===u||"["===u&&o+2===n){le(a,void 0===u?new ne(s,e,t):new ie(s,e,t));break}{let e=a.map[s];void 0===e&&(e=new oe(s),le(a,e)),a=e}}}function ce(e,t){this.seq=[],this.map={};const a=e.getProgramParameter(t,35718);for(let r=0;r<a;++r){const a=e.getActiveUniform(t,r);ue(a,e.getUniformLocation(t,a.name),this)}}ce.prototype.setValue=function(e,t,a,r){const n=this.map[t];void 0!==n&&n.setValue(e,a,r)},ce.prototype.setOptional=function(e,t,a){const r=t[a];void 0!==r&&this.setValue(e,a,r)},ce.upload=function(e,t,a,r){for(let n=0,i=t.length;n!==i;++n){const i=t[n],o=a[i.id];!1!==o.needsUpdate&&i.setValue(e,o.value,r)}},ce.seqWithValue=function(e,t){const a=[];for(let r=0,n=e.length;r!==n;++r){const n=e[r];n.id in t&&a.push(n)}return a}},9627:(e,t,a)=>{a.d(t,{f:()=>n});var r=a(1661);function n(e,t,a){const n=a.isWebGL2;return{convert:function(e){let a;if(e===r.ywz)return 5121;if(e===r.k0A)return 32819;if(e===r.irR)return 32820;if(e===r.XNv)return 33635;if(e===r.T95)return 5120;if(e===r.iAb)return 5122;if(e===r.LsT)return 5123;if(e===r.Kz5)return 5124;if(e===r.JQ4)return 5125;if(e===r.VzW)return 5126;if(e===r.cLu)return n?5131:(a=t.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(e===r.OTo)return 6406;if(e===r.UCm)return 6407;if(e===r.wk1)return 6408;if(e===r.Y8D)return 6409;if(e===r.cRx)return 6410;if(e===r.qkB)return 6402;if(e===r.brP)return 34041;if(e===r.hEm)return 6403;if(e===r.D9w)return 36244;if(e===r.av9)return 33319;if(e===r.CtA)return 33320;if(e===r.F5G)return 36248;if(e===r.E2K)return 36249;if(e===r.wuA||e===r.BFQ||e===r.v3W||e===r.ILR){if(a=t.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(e===r.wuA)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===r.BFQ)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===r.v3W)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===r.ILR)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===r._AM||e===r.vCx||e===r.eaV||e===r.CaW){if(a=t.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(e===r._AM)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===r.vCx)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===r.eaV)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===r.CaW)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===r.fto)return a=t.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if((e===r.l0P||e===r.ekQ)&&(a=t.get("WEBGL_compressed_texture_etc"),null!==a)){if(e===r.l0P)return a.COMPRESSED_RGB8_ETC2;if(e===r.ekQ)return a.COMPRESSED_RGBA8_ETC2_EAC}return e===r.ptH||e===r.jZA||e===r.y2t||e===r.gi4||e===r.Djp||e===r.BG$||e===r.NYV||e===r.xJs||e===r.pKu||e===r.GG6||e===r.Gih||e===r.FUD||e===r.iiP||e===r.SvJ||e===r.APR||e===r.Abz||e===r.v6B||e===r.pnl||e===r.OS$||e===r._wO||e===r.bcs||e===r.Y5S||e===r.Wso||e===r.p1$||e===r.I0h||e===r.Yjz||e===r.ePn||e===r.HBG?(a=t.get("WEBGL_compressed_texture_astc"),null!==a?e:null):e===r.bsb?(a=t.get("EXT_texture_compression_bptc"),null!==a?e:null):e===r.wJv?n?34042:(a=t.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}}}]);